(function(){function w(a,b,f,g,r,l){return{tag:a,key:b,attrs:f,children:g,text:r,dom:l,domSize:void 0,state:void 0,events:void 0,instance:void 0,skip:!1}}function N(a){for(var b in a)if(B.call(a,b))return!1;return!0}function u(a){var b=arguments[1],f=2;if(null==a||"string"!==typeof a&&"function"!==typeof a&&"function"!==typeof a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a){var g;if(!(g=O[a])){var r="div";for(var l=[],k={};g=R.exec(a);){var m=g[1],
t=g[2];""===m&&""!==t?r=t:"#"===m?k.id=t:"."===m?l.push(t):"["===g[3][0]&&((m=g[6])&&(m=m.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===g[4]?l.push(m):k[g[4]]=""===m?m:m||!0)}0<l.length&&(k.className=l.join(" "));g=O[a]={tag:r,attrs:k}}}if(null==b)b={};else if("object"!==typeof b||null!=b.tag||Array.isArray(b))b={},f=1;if(arguments.length===f+1)r=arguments[f],Array.isArray(r)||(r=[r]);else for(r=[];f<arguments.length;)r.push(arguments[f++]);f=w.normalizeChildren(r);if("string"===typeof a){r=
!1;var e,y;l=b.className||b["class"];if(!N(g.attrs)&&!N(b)){k={};for(var d in b)B.call(b,d)&&(k[d]=b[d]);b=k}for(d in g.attrs)B.call(g.attrs,d)&&(b[d]=g.attrs[d]);void 0!==l&&(void 0!==b["class"]&&(b["class"]=void 0,b.className=l),null!=g.attrs.className&&(b.className=g.attrs.className+" "+l));for(d in b)if(B.call(b,d)&&"key"!==d){r=!0;break}Array.isArray(f)&&1===f.length&&null!=f[0]&&"#"===f[0].tag?y=f[0].children:e=f;return w(g.tag,b.key,r?b:void 0,e,y)}return w(a,b.key,b,f)}function S(a){var b=
0,f=null,g="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var r=Date.now()-b;null===f&&(f=g(function(){f=null;a();b=Date.now()},16-r))}}w.normalize=function(a){return Array.isArray(a)?w("[",void 0,void 0,w.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?w("#",void 0,void 0,!1===a?"":a,void 0,void 0):a};w.normalizeChildren=function(a){for(var b=0;b<a.length;b++)a[b]=w.normalize(a[b]);return a};var R=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,
O={},B={}.hasOwnProperty;u.trust=function(a){null==a&&(a="");return w("<",void 0,void 0,a,void 0,void 0)};u.fragment=function(a,b){return w("[",a.key,a,w.normalizeChildren(b),void 0,void 0)};var h=function(a){function b(a,d){return function H(b){var x;try{if(!d||null==b||"object"!==typeof b&&"function"!==typeof b||"function"!==typeof(x=b.then))e(function(){d||0!==a.length||console.error("Possible unhandled promise rejection:",b);for(var f=0;f<a.length;f++)a[f](b);r.length=0;l.length=0;t.state=d;t.retry=
function(){H(b)}});else{if(b===g)throw new TypeError("Promise can't be resolved w/ itself");f(x.bind(b))}}catch(T){m(T)}}}function f(a){function d(d){return function(a){0<b++||d(a)}}var b=0,f=d(m);try{a(d(k),f)}catch(H){f(H)}}if(!(this instanceof h))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");var g=this,r=[],l=[],k=b(r,!0),m=b(l,!1),t=g._instance={resolvers:r,rejectors:l},e="function"===typeof setImmediate?setImmediate:
setTimeout;f(a)};h.prototype.then=function(a,b){function f(a,b,f,k){b.push(function(d){if("function"!==typeof a)f(d);else try{r(a(d))}catch(A){l&&l(A)}});"function"===typeof g.retry&&k===g.state&&g.retry()}var g=this._instance,r,l,k=new h(function(a,b){r=a;l=b});f(a,g.resolvers,r,!0);f(b,g.rejectors,l,!1);return k};h.prototype["catch"]=function(a){return this.then(null,a)};h.prototype["finally"]=function(a){return this.then(function(b){return h.resolve(a()).then(function(){return b})},function(b){return h.resolve(a()).then(function(){return h.reject(b)})})};
h.resolve=function(a){return a instanceof h?a:new h(function(b){b(a)})};h.reject=function(a){return new h(function(b,f){f(a)})};h.all=function(a){return new h(function(b,f){var g=a.length,r=0,l=[];if(0===a.length)b([]);else for(var k=0;k<a.length;k++)(function(m){function t(a){r++;l[m]=a;r===g&&b(l)}null==a[m]||"object"!==typeof a[m]&&"function"!==typeof a[m]||"function"!==typeof a[m].then?t(a[m]):a[m].then(t,f)})(k)})};h.race=function(a){return new h(function(b,f){for(var g=0;g<a.length;g++)a[g].then(b,
f)})};"undefined"!==typeof window?("undefined"===typeof window.Promise?window.Promise=h:window.Promise.prototype["finally"]||(window.Promise.prototype["finally"]=h.prototype["finally"]),h=window.Promise):"undefined"!==typeof global&&("undefined"===typeof global.Promise?global.Promise=h:global.Promise.prototype["finally"]||(global.Promise.prototype["finally"]=h.prototype["finally"]),h=global.Promise);var D=function(a){function b(a,g){if(Array.isArray(g))for(var r=0;r<g.length;r++)b(a+"["+r+"]",g[r]);
else if("[object Object]"===Object.prototype.toString.call(g))for(r in g)b(a+"["+r+"]",g[r]);else f.push(encodeURIComponent(a)+(null!=g&&""!==g?"="+encodeURIComponent(g):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var f=[],g;for(g in a)b(g,a[g]);return f.join("&")},U=/^file:\/\//i,L=function(a,b){function f(){function d(){0===--a&&"function"===typeof y&&y()}var a=0;return function C(b){var f=b.then;b.then=function(){a++;var g=f.apply(b,arguments);g.then(d,function(b){d();
if(0===a)throw b;});return C(g)};return b}}function g(d,a){if("string"===typeof d){var b=d;d=a||{};null==d.url&&(d.url=b)}return d}function r(d,a){if(null==a)return d;for(var b=d.match(/:[^\/]+/gi)||[],f=0;f<b.length;f++){var g=b[f].slice(1);null!=a[g]&&(d=d.replace(b[f],a[g]))}return d}function l(d,a){var b=D(a);if(""!==b){var f=0>d.indexOf("?")?"?":"&";d+=f+b}return d}function k(d){try{return""!==d?JSON.parse(d):null}catch(A){throw Error(d);}}function m(d){return d.responseText}function t(d,a){if("function"===
typeof d)if(Array.isArray(a))for(var b=0;b<a.length;b++)a[b]=new d(a[b]);else return new d(a);return a}var e=0,y;return{request:function(d,e){var x=f();d=g(d,e);var A=new b(function(b,f){null==d.method&&(d.method="GET");d.method=d.method.toUpperCase();var g="GET"===d.method||"TRACE"===d.method?!1:"boolean"===typeof d.useBody?d.useBody:!0;"function"!==typeof d.serialize&&(d.serialize="undefined"!==typeof FormData&&d.data instanceof FormData?function(d){return d}:JSON.stringify);"function"!==typeof d.deserialize&&
(d.deserialize=k);"function"!==typeof d.extract&&(d.extract=m);d.url=r(d.url,d.data);g?d.data=d.serialize(d.data):d.url=l(d.url,d.data);var e=new a.XMLHttpRequest,x=!1,A=e.abort;e.abort=function(){x=!0;A.call(e)};e.open(d.method,d.url,"boolean"===typeof d.async?d.async:!0,"string"===typeof d.user?d.user:void 0,"string"===typeof d.password?d.password:void 0);d.serialize!==JSON.stringify||!g||d.headers&&d.headers.hasOwnProperty("Content-Type")||e.setRequestHeader("Content-Type","application/json; charset=utf-8");
d.deserialize!==k||d.headers&&d.headers.hasOwnProperty("Accept")||e.setRequestHeader("Accept","application/json, text/*");d.withCredentials&&(e.withCredentials=d.withCredentials);d.timeout&&(e.timeout=d.timeout);for(var y in d.headers)({}).hasOwnProperty.call(d.headers,y)&&e.setRequestHeader(y,d.headers[y]);"function"===typeof d.config&&(e=d.config(e,d)||e);e.onreadystatechange=function(){if(!x&&4===e.readyState)try{var a=d.extract!==m?d.extract(e,d):d.deserialize(d.extract(e,d));if(d.extract!==m||
200<=e.status&&300>e.status||304===e.status||U.test(d.url))b(t(d.type,a));else{var g=Error(e.responseText);g.code=e.status;g.response=a;f(g)}}catch(E){f(E)}};g&&null!=d.data?e.send(d.data):e.send()});return!0===d.background?A:x(A)},jsonp:function(d,m){var x=f();d=g(d,m);var k=new b(function(b,f){var g=d.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+e++,m=a.document.createElement("script");a[g]=function(f){m.parentNode.removeChild(m);b(t(d.type,f));delete a[g]};m.onerror=function(){m.parentNode.removeChild(m);
f(Error("JSONP request failed"));delete a[g]};null==d.data&&(d.data={});d.url=r(d.url,d.data);d.data[d.callbackKey||"callback"]=g;m.src=l(d.url,d.data);a.document.documentElement.appendChild(m)});return!0===d.background?k:x(k)},setCompletionCallback:function(d){y=d}}}(window,h),Q=function(a){function b(q,c){if(q.state!==c)throw Error("`vnode.state` must not be modified");}function f(q){var c=q.state;try{return this.apply(c,arguments)}finally{b(q,c)}}function g(q,c,d,a,b,f,g){for(;d<a;d++){var n=c[d];
null!=n&&r(q,n,b,g,f)}}function r(q,c,n,a,b){var e=c.tag;if("string"===typeof e)switch(c.state={},null!=c.attrs&&J(c.attrs,c,n),e){case "#":return c.dom=p.createTextNode(c.children),y(q,c.dom,b),c.dom;case "<":return l(q,c,a,b);case "[":var z=p.createDocumentFragment();null!=c.children&&(e=c.children,g(z,e,0,e.length,n,null,a));c.dom=z.firstChild;c.domSize=z.childNodes.length;y(q,z,b);return z;default:var t=c.tag,v=(e=c.attrs)&&e.is;t=(a=c.attrs&&c.attrs.xmlns||B[c.tag]||a)?v?p.createElementNS(a,
t,{is:v}):p.createElementNS(a,t):v?p.createElement(t,{is:v}):p.createElement(t);c.dom=t;if(null!=e)for(z in v=a,e)C(c,z,null,e[z],v);y(q,t,b);null!=c.attrs&&null!=c.attrs.contenteditable?d(c):(null!=c.text&&(""!==c.text?t.textContent=c.text:c.children=[w("#",void 0,void 0,c.text,void 0,void 0)]),null!=c.children&&(q=c.children,g(t,q,0,q.length,n,null,a),q=c.attrs,"select"===c.tag&&null!=q&&("value"in q&&C(c,"value",null,q.value,void 0),"selectedIndex"in q&&C(c,"selectedIndex",null,q.selectedIndex,
void 0))));return t}else{b:{if("function"===typeof c.tag.view){c.state=Object.create(c.tag);z=c.state.view;if(null!=z.$$reentrantLock$$)break b;z.$$reentrantLock$$=!0}else{c.state=void 0;z=c.tag;if(null!=z.$$reentrantLock$$)break b;z.$$reentrantLock$$=!0;c.state=null!=c.tag.prototype&&"function"===typeof c.tag.prototype.view?new c.tag(c):c.tag(c)}null!=c.attrs&&J(c.attrs,c,n);J(c.state,c,n);c.instance=w.normalize(f.call(c.state.view,c));if(c.instance===c)throw Error("A view cannot return the vnode it received as argument");
z.$$reentrantLock$$=null}null!=c.instance?(n=r(q,c.instance,n,a,b),c.dom=c.instance.dom,c.domSize=null!=c.dom?c.instance.domSize:0,y(q,n,b),c=n):(c.domSize=0,c=V);return c}}function l(d,c,a,b){var q=c.children.match(/^\s*?<(\w+)/im)||[];q=p.createElement(D[q[1]]||"div");"http://www.w3.org/2000/svg"===a?(q.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+c.children+"</svg>",q=q.firstChild):q.innerHTML=c.children;c.dom=q.firstChild;c.domSize=q.childNodes.length;for(c=p.createDocumentFragment();a=
q.firstChild;)c.appendChild(a);y(d,c,b);return c}function k(q,c,d,a,b,f){if(c!==d&&(null!=c||null!=d))if(null==c)g(q,d,0,d.length,a,b,f);else if(null==d)A(c,0,c.length);else{for(var n=0,v=Math.min(c.length,d.length),l=!1;n<v;n++)if(null!=c[n]&&null!=d[n]){null==c[n].key&&null==d[n].key&&(l=!0);break}if(l&&c.length===d.length)for(n=0;n<d.length;n++)c[n]===d[n]||null==c[n]&&null==d[n]||(null==c[n]?r(q,d[n],a,f,e(c,n+1,b)):null==d[n]?A(c,n,n+1):m(q,c[n],d[n],a,e(c,n+1,b),f));else{v=n=0;for(var k=c.length-
1,x=d.length-1,F,h,p;k>=v&&x>=n;)if(h=c[v],p=d[n],h===p||null==h&&null==p)v++,n++;else if(null==h)(l||null==p.key)&&r(q,d[n],a,f,e(c,++n,b)),v++;else if(null==p){if(l||null==h.key)A(c,n,n+1),v++;n++}else if(h.key===p.key)v++,n++,m(q,h,p,a,e(c,v,b),f);else if(h=c[k],h===p)k--,n++;else if(null==h)k--;else if(null==p)n++;else if(h.key===p.key)m(q,h,p,a,e(c,k+1,b),f),n<x&&y(q,t(p),e(c,v,b)),k--,n++;else break;for(;k>=v&&x>=n;){h=c[k];p=d[x];if(h===p)k--,x--;else if(null==h)k--;else{if(null!=p)if(h.key===
p.key)m(q,h,p,a,e(c,k+1,b),f),null!=h.dom&&(b=h.dom),k--;else{if(!F){F=c;l=k;h={};var w;for(w=0;w<l;w++){var u=F[w];null!=u&&(u=u.key,null!=u&&(h[u]=w))}F=h}null!=p&&(l=F[p.key],null!=l?(h=c[l],m(q,h,p,a,e(c,k+1,b),f),y(q,t(p),b),h.skip=!0,null!=h.dom&&(b=h.dom)):b=r(q,p,a,f,b))}x--}if(x<n)break}g(q,d,n,x+1,a,b,f);A(c,v,k+1)}}}function m(q,c,a,b,g,e){var n=c.tag;if(n===a.tag){a.state=c.state;a.events=c.events;var v;var h;null!=a.attrs&&"function"===typeof a.attrs.onbeforeupdate&&(v=f.call(a.attrs.onbeforeupdate,
a,c));"string"!==typeof a.tag&&"function"===typeof a.state.onbeforeupdate&&(h=f.call(a.state.onbeforeupdate,a,c));void 0===v&&void 0===h||v||h?v=!1:(a.dom=c.dom,a.domSize=c.domSize,a.instance=c.instance,v=!0);if(!v)if("string"===typeof n)switch(null!=a.attrs&&K(a.attrs,a,b),n){case "#":c.children.toString()!==a.children.toString()&&(c.dom.nodeValue=a.children);a.dom=c.dom;break;case "<":c.children!==a.children?(t(c),l(q,a,e,g)):(a.dom=c.dom,a.domSize=c.domSize);break;case "[":k(q,c.children,a.children,
b,g,e);c=0;b=a.children;a.dom=null;if(null!=b){for(var p=0;p<b.length;p++)e=b[p],null!=e&&null!=e.dom&&(null==a.dom&&(a.dom=e.dom),c+=e.domSize||1);1!==c&&(a.domSize=c)}break;default:q=a.dom=c.dom;e=a.attrs&&a.attrs.xmlns||B[a.tag]||e;"textarea"===a.tag&&(null==a.attrs&&(a.attrs={}),null!=a.text&&(a.attrs.value=a.text,a.text=void 0));g=c.attrs;n=a.attrs;v=e;if(null!=n)for(p in n)C(a,p,g&&g[p],n[p],v);if(null!=g)for(p in g)null!=n&&p in n||("className"===p&&(p="class"),"o"!==p[0]||"n"!==p[1]||u(p)?
"key"!==p&&a.dom.removeAttribute(p):P(a,p,void 0));null!=a.attrs&&null!=a.attrs.contenteditable?d(a):null!=c.text&&null!=a.text&&""!==a.text?c.text.toString()!==a.text.toString()&&(c.dom.firstChild.nodeValue=a.text):(null!=c.text&&(c.children=[w("#",void 0,void 0,c.text,void 0,c.dom.firstChild)]),null!=a.text&&(a.children=[w("#",void 0,void 0,a.text,void 0,void 0)]),k(q,c.children,a.children,b,null,e))}else{a.instance=w.normalize(f.call(a.state.view,a));if(a.instance===a)throw Error("A view cannot return the vnode it received as argument");
null!=a.attrs&&K(a.attrs,a,b);K(a.state,a,b);null!=a.instance?(null==c.instance?r(q,a.instance,b,e,g):m(q,c.instance,a.instance,b,g,e),a.dom=a.instance.dom,a.domSize=a.instance.domSize):null!=c.instance?(x(c.instance),a.dom=void 0,a.domSize=0):(a.dom=c.dom,a.domSize=c.domSize)}}else x(c),r(q,a,b,e,g)}function t(a){var c=a.domSize;if(null!=c||null==a.dom){var d=p.createDocumentFragment();if(0<c){for(a=a.dom;--c;)d.appendChild(a.nextSibling);d.insertBefore(a,d.firstChild)}return d}return a.dom}function e(a,
c,d){for(;c<a.length;c++)if(null!=a[c]&&null!=a[c].dom)return a[c].dom;return d}function y(a,c,d){d?a.insertBefore(c,d):a.appendChild(c)}function d(a){var c=a.children;if(null!=c&&1===c.length&&"<"===c[0].tag)c=c[0].children,a.dom.innerHTML!==c&&(a.dom.innerHTML=c);else if(null!=a.text||null!=c&&0!==c.length)throw Error("Child node of a contenteditable must be trusted");}function A(a,c,d){for(;c<d;c++){var b=a[c];null!=b&&(b.skip?b.skip=!1:x(b))}}function x(a){function c(){if(++q===d&&(b(a,g),h(a),
a.dom)){var c=a.domSize||1;if(1<c)for(var f=a.dom;--c;){var e=f.nextSibling,n=e.parentNode;null!=n&&n.removeChild(e)}c=a.dom;f=c.parentNode;null!=f&&f.removeChild(c)}}var d=1,q=0,g=a.state;if(a.attrs&&"function"===typeof a.attrs.onbeforeremove){var e=f.call(a.attrs.onbeforeremove,a);null!=e&&"function"===typeof e.then&&(d++,e.then(c,c))}"string"!==typeof a.tag&&"function"===typeof a.state.onbeforeremove&&(e=f.call(a.state.onbeforeremove,a),null!=e&&"function"===typeof e.then&&(d++,e.then(c,c)));c()}
function h(a){a.attrs&&"function"===typeof a.attrs.onremove&&f.call(a.attrs.onremove,a);if("string"!==typeof a.tag)"function"===typeof a.state.onremove&&f.call(a.state.onremove,a),null!=a.instance&&h(a.instance);else if(a=a.children,Array.isArray(a))for(var c=0;c<a.length;c++){var d=a[c];null!=d&&h(d)}}function C(a,c,d,b,f){if("key"!==c&&"is"!==c&&!u(c)){if("o"===c[0]&&"n"===c[1])return P(a,c,b);if("undefined"===typeof b&&"value"===c&&d!==b)a.dom.value="";else if((d!==b||"value"===c||"checked"===
c||"selectedIndex"===c||"selected"===c&&a.dom===p.activeElement||"option"===a.tag&&a.dom.parentNode===p.activeElement||"object"===typeof b)&&void 0!==b){var e=a.dom;if("xlink:"===c.slice(0,6))e.setAttributeNS("http://www.w3.org/1999/xlink",c,b);else if("style"===c)if(a=d,null!=a&&null!=b&&"object"===typeof a&&"object"===typeof b&&b!==a){for(var g in b)b[g]!==a[g]&&(e.style[g]=b[g]);for(g in a)g in b||(e.style[g]="")}else if(a===b&&(e.style.cssText="",a=null),null==b)e.style.cssText="";else if("string"===
typeof b)e.style.cssText=b;else for(g in"string"===typeof a&&(e.style.cssText=""),b)e.style[g]=b[g];else if(c in e&&"href"!==c&&"list"!==c&&"form"!==c&&"width"!==c&&"height"!==c&&void 0===f&&!(a.attrs.is||-1<a.tag.indexOf("-"))){if("value"===c){g=""+b;if(("input"===a.tag||"textarea"===a.tag)&&a.dom.value===g&&a.dom===p.activeElement)return;if("select"===a.tag)if(null===b){if(-1===a.dom.selectedIndex&&a.dom===p.activeElement)return}else if(null!==d&&a.dom.value===g&&a.dom===p.activeElement)return;
if("option"===a.tag&&null!=d&&a.dom.value===g)return}"input"===a.tag&&"type"===c?e.setAttribute(c,b):e[c]=b}else"boolean"===typeof b?b?e.setAttribute(c,""):e.removeAttribute(c):e.setAttribute("className"===c?"class":c,b)}}}function u(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function I(){}function P(a,c,d){null!=a.events?a.events[c]!==d&&(null==d||"function"!==typeof d&&"object"!==typeof d?(null!=a.events[c]&&a.dom.removeEventListener(c.slice(2),
a.events,!1),a.events[c]=void 0):(null==a.events[c]&&a.dom.addEventListener(c.slice(2),a.events,!1),a.events[c]=d)):null==d||"function"!==typeof d&&"object"!==typeof d||(a.events=new I,a.dom.addEventListener(c.slice(2),a.events,!1),a.events[c]=d)}function J(a,c,d){"function"===typeof a.oninit&&f.call(a.oninit,c);"function"===typeof a.oncreate&&d.push(f.bind(a.oncreate,c))}function K(a,c,d){"function"===typeof a.onupdate&&d.push(f.bind(a.onupdate,c))}var p=a.document,V=p.createDocumentFragment(),B=
{svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},E,D={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};I.prototype=Object.create(null);I.prototype.handleEvent=function(a){var c=this["on"+a.type];"function"===typeof c?c.call(a.target,a):"function"===typeof c.handleEvent&&c.handleEvent(a);"function"===typeof E&&E.call(a.target,a)};return{render:function(a,c){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");
var d=[],b=p.activeElement,e=a.namespaceURI;null==a.vnodes&&(a.textContent="");Array.isArray(c)||(c=[c]);k(a,a.vnodes,w.normalizeChildren(c),d,null,"http://www.w3.org/1999/xhtml"===e?void 0:e);a.vnodes=c;null!=b&&p.activeElement!==b&&b.focus();for(b=0;b<d.length;b++)d[b]()},setEventCallback:function(a){return E=a}}},G=function(a,b){function f(a){a=h.indexOf(a);-1<a&&h.splice(a,2)}function g(){if(k)throw Error("Nested m.redraw.sync() call");k=!0;for(var a=1;a<h.length;a+=2)try{h[a]()}catch(e){"undefined"!==
typeof console&&console.error(e)}k=!1}var r=Q(a);r.setEventCallback(function(a){!1===a.redraw?a.redraw=void 0:m()});var h=[],k=!1,m=(b||S)(g);m.sync=g;return{subscribe:function(a,b){f(a);h.push(a,b)},unsubscribe:f,redraw:m,render:r.render}}(window);L.setCompletionCallback(G.redraw);u.mount=function(a){return function(b,f){if(null===f)a.render(b,[]),a.unsubscribe(b);else{if(null==f.view&&"function"!==typeof f)throw Error("m.mount(element, component) expects a component, not a vnode");var g=function(){a.render(b,
w(f))};a.subscribe(b,g);g()}}}(G);var W=h,M=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var b={},f={},g=0;g<a.length;g++){var h=a[g].split("="),l=decodeURIComponent(h[0]);h=2===h.length?decodeURIComponent(h[1]):"";"true"===h?h=!0:"false"===h&&(h=!1);var k=l.split(/\]\[?|\[/),m=b;-1<l.indexOf("[")&&k.pop();for(var t=0;t<k.length;t++){l=k[t];var e=k[t+1];e=""==e||!isNaN(parseInt(e,10));var y=t===k.length-1;""===l&&(l=k.slice(0,t).join(),null==f[l]&&(f[l]=
0),l=f[l]++);null==m[l]&&(m[l]=y?h:e?[]:{});m=m[l]}}return b},X=function(a){function b(b){var e=a.location[b].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===b&&"/"!==e[0]&&(e="/"+e);return e}function f(a){return function(){null==k&&(k=l(function(){k=null;a()}))}}function g(a,b,g){var d=a.indexOf("?"),e=a.indexOf("#"),f=-1<d?d:-1<e?e:a.length;if(-1<d){d=M(a.slice(d+1,-1<e?e:a.length));for(var h in d)b[h]=d[h]}if(-1<e)for(h in b=M(a.slice(e+1)),b)g[h]=b[h];return a.slice(0,f)}var h=
"function"===typeof a.history.pushState,l="function"===typeof setImmediate?setImmediate:setTimeout,k,m={prefix:"#!",getPath:function(){switch(m.prefix.charAt(0)){case "#":return b("hash").slice(m.prefix.length);case "?":return b("search").slice(m.prefix.length)+b("hash");default:return b("pathname").slice(m.prefix.length)+b("search")+b("hash")}},setPath:function(b,e,f){var d={},k={};b=g(b,d,k);if(null!=e){for(var l in e)d[l]=e[l];b=b.replace(/:([^\/]+)/g,function(a,b){delete d[b];return e[b]})}(l=
D(d))&&(b+="?"+l);(k=D(k))&&(b+="#"+k);h?(k=f?f.state:null,l=f?f.title:null,a.onpopstate(),f&&f.replace?a.history.replaceState(k,l,m.prefix+b):a.history.pushState(k,l,m.prefix+b)):a.location.href=m.prefix+b},defineRoutes:function(b,e,k){function d(){var d=m.getPath(),f={},h=g(d,f,f),l=a.history.state;if(null!=l)for(var r in l)f[r]=l[r];for(var t in b)if(l=new RegExp("^"+t.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),l.test(h)){h.replace(l,function(){for(var a=t.match(/:[^\/]+/g)||
[],g=[].slice.call(arguments,1,-2),h=0;h<a.length;h++)f[a[h].replace(/:|\./g,"")]=decodeURIComponent(g[h]);e(b[t],f,d,t)});return}k(d,f)}h?a.onpopstate=f(d):"#"===m.prefix.charAt(0)&&(a.onhashchange=d);d()}};return m};u.route=function(a,b){var f=X(a),g=function(a){return a},h,l,k,m,t,e=function(a,e,r){function d(){null!=h&&b.render(a,h(w(l,k.key,k)))}if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var x=function(){d();x=b.redraw};b.subscribe(a,d);var u=
function(a){if(a!==e)f.setPath(e,null,{replace:!0});else throw Error("Could not resolve default route "+e);};f.defineRoutes(r,function(a,d,b){var f=t=function(a,e){f===t&&(l=null==e||"function"!==typeof e.view&&"function"!==typeof e?"div":e,k=d,m=b,t=null,h=(a.render||g).bind(a),x())};a.view||"function"===typeof a?f({},a):a.onmatch?W.resolve(a.onmatch(d,b)).then(function(d){f(a,d)},u):f(a,"div")},u)};e.set=function(a,b,e){null!=t&&(e=e||{},e.replace=!0);t=null;f.setPath(a,b,e)};e.get=function(){return m};
e.prefix=function(a){f.prefix=a};var u=function(a,b){b.dom.setAttribute("href",f.prefix+b.attrs.href);b.dom.onclick=function(b){b.ctrlKey||b.metaKey||b.shiftKey||2===b.which||(b.preventDefault(),b.redraw=!1,b=this.getAttribute("href"),0===b.indexOf(f.prefix)&&(b=b.slice(f.prefix.length)),e.set(b,void 0,a))}};e.link=function(a){return null==a.tag?u.bind(u,a):u({},a)};e.param=function(a){return"undefined"!==typeof k&&"undefined"!==typeof a?k[a]:k};return e}(window,G);u.withAttr=function(a,b,f){return function(g){b.call(f||
this,a in g.currentTarget?g.currentTarget[a]:g.currentTarget.getAttribute(a))}};var Y=Q(window);u.render=Y.render;u.redraw=G.redraw;u.request=L.request;u.jsonp=L.jsonp;u.parseQueryString=M;u.buildQueryString=D;u.version="1.1.3";u.vnode=w;u.PromisePolyfill=h;"undefined"!==typeof module?module.exports=u:window.m=u})();