new function(){function m(a,c,h,g,d,f){return{tag:a,key:c,attrs:h,children:g,text:d,dom:f,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function y(a){if(null==a||"string"!==typeof a&&null==a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a&&void 0===I[a]){for(var c,h,g=[],d={};c=O.exec(a);){var f=c[1],n=c[2];""===f&&""!==n?h=n:"#"===f?d.id=n:"."===f?g.push(n):"["===c[3][0]&&((f=c[6])&&(f=f.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
"class"===c[4]?g.push(f):d[c[4]]=f||!0)}0<g.length&&(d.className=g.join(" "));I[a]=function(a,c){var f=!1,b,g,v=a.className||a["class"],t;for(t in d)a[t]=d[t];void 0!==v&&(void 0!==a["class"]&&(a["class"]=void 0,a.className=v),void 0!==d.className&&(a.className=d.className+" "+v));for(t in a)if("key"!==t){f=!0;break}c instanceof Array&&1==c.length&&null!=c[0]&&"#"===c[0].tag?g=c[0].children:b=c;return m(h||"div",a.key,f?a:void 0,b,g,void 0)}}var r;null!=arguments[1]&&("object"!==typeof arguments[1]||
void 0!==arguments[1].tag||arguments[1]instanceof Array)?g=1:(r=arguments[1],g=2);if(arguments.length===g+1)c=arguments[g]instanceof Array?arguments[g]:[arguments[g]];else for(c=[];g<arguments.length;g++)c.push(arguments[g]);return"string"===typeof a?I[a](r||{},m.normalizeChildren(c)):m(a,r&&r.key,r||{},m.normalizeChildren(c),void 0,void 0)}function P(a){var c=0,h=null,g="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var d=Date.now();0===c||16<=d-c?(c=
d,a()):null===h&&(h=g(function(){h=null;a();c=Date.now()},16-(d-c)))}}m.normalize=function(a){return a instanceof Array?m("[",void 0,void 0,m.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?m("#",void 0,void 0,a,void 0,void 0):a};m.normalizeChildren=function(a){for(var c=0;c<a.length;c++)a[c]=m.normalize(a[c]);return a};var O=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,I={};y.trust=function(a){null==a&&(a="");return m("<",void 0,void 0,a,void 0,
void 0)};y.fragment=function(a,c){return m("[",a.key,a,m.normalizeChildren(c),void 0,void 0)};var u=function(a){function c(a,b){return function v(c){var t;try{if(!b||null==c||"object"!==typeof c&&"function"!==typeof c||"function"!==typeof(t=c.then))F(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",c);for(var g=0;g<a.length;g++)a[g](c);d.length=0;f.length=0;q.state=b;q.retry=function(){v(c)}});else{if(c===g)throw new TypeError("Promise can't be resolved w/ itself");
h(t.bind(c))}}catch(G){r(G)}}}function h(a){function b(b){return function(a){0<c++||b(a)}}var c=0,d=b(r);try{a(b(n),d)}catch(t){d(t)}}if(!(this instanceof u))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");var g=this,d=[],f=[],n=c(d,!0),r=c(f,!1),q=g._instance={resolvers:d,rejectors:f},F="function"===typeof setImmediate?setImmediate:setTimeout;h(a)};u.prototype.then=function(a,c){function h(a,c,h,l){c.push(function(b){if("function"!==
typeof a)h(b);else try{d(a(b))}catch(B){f&&f(B)}});"function"===typeof g.retry&&l===g.state&&g.retry()}var g=this._instance,d,f,n=new u(function(a,c){d=a;f=c});h(a,g.resolvers,d,!0);h(c,g.rejectors,f,!1);return n};u.prototype["catch"]=function(a){return this.then(null,a)};u.resolve=function(a){return a instanceof u?a:new u(function(c){c(a)})};u.reject=function(a){return new u(function(c,h){h(a)})};u.all=function(a){return new u(function(c,h){var g=a.length,d=0,f=[];if(0===a.length)c([]);else for(var n=
0;n<a.length;n++)(function(n){function q(a){d++;f[n]=a;d===g&&c(f)}null==a[n]||"object"!==typeof a[n]&&"function"!==typeof a[n]||"function"!==typeof a[n].then?q(a[n]):a[n].then(q,h)})(n)})};u.race=function(a){return new u(function(c,h){for(var g=0;g<a.length;g++)a[g].then(c,h)})};"undefined"===typeof Promise&&("undefined"!==typeof window?window.Promise=u:"undefined"!==typeof global&&(global.Promise=u));var C=function(a){function c(a,f){if(f instanceof Array)for(var d=0;d<f.length;d++)c(a+"["+d+"]",
f[d]);else if("[object Object]"===Object.prototype.toString.call(f))for(d in f)c(a+"["+d+"]",f[d]);else h.push(encodeURIComponent(a)+(null!=f&&""!==f?"="+encodeURIComponent(f):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var h=[],g;for(g in a)c(g,a[g]);return h.join("&")},J=function(a,c){function h(){function b(){0===--a&&"function"===typeof l&&l()}var a=0;return function t(c){var d=c.then;c.then=function(){a++;var f=d.apply(c,arguments);f.then(b,function(a){b();throw a;
});return t(f)};return c}}function g(b,a){if("string"===typeof b){var c=b;b=a||{};null==b.url&&(b.url=c)}return b}function d(b,a){if(null==a)return b;for(var c=b.match(/:[^\/]+/gi)||[],d=0;d<c.length;d++){var f=c[d].slice(1);null!=a[f]&&(b=b.replace(c[d],a[f]),delete a[f])}return b}function f(b,a){var c=C(a);if(""!==c){var d=0>b.indexOf("?")?"?":"&";b+=d+c}return b}function n(b){try{return""!==b?JSON.parse(b):null}catch(B){throw Error(b);}}function r(b){return b.responseText}function q(b,a){if("function"===
typeof b)if(a instanceof Array)for(var c=0;c<a.length;c++)a[c]=new b(a[c]);else return new b(a);return a}var m=0,l;return{request:function(b,l){var v=h();b=g(b,l);var t=new c(function(c,g){null==b.method&&(b.method="GET");b.method=b.method.toUpperCase();var h="boolean"===typeof b.useBody?b.useBody:"GET"!==b.method&&"TRACE"!==b.method;"function"!==typeof b.serialize&&(b.serialize="undefined"!==typeof FormData&&b.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==typeof b.deserialize&&
(b.deserialize=n);"function"!==typeof b.extract&&(b.extract=r);b.url=d(b.url,b.data);h?b.data=b.serialize(b.data):b.url=f(b.url,b.data);var l=new a.XMLHttpRequest;l.open(b.method,b.url,"boolean"===typeof b.async?b.async:!0,"string"===typeof b.user?b.user:void 0,"string"===typeof b.password?b.password:void 0);b.serialize===JSON.stringify&&h&&l.setRequestHeader("Content-Type","application/json; charset=utf-8");b.deserialize===n&&l.setRequestHeader("Accept","application/json, text/*");b.withCredentials&&
(l.withCredentials=b.withCredentials);"function"===typeof b.config&&(l=b.config(l,b)||l);l.onreadystatechange=function(){if(4===l.readyState)try{var a=b.extract!==r?b.extract(l,b):b.deserialize(b.extract(l,b));if(200<=l.status&&300>l.status||304===l.status)c(q(b.type,a));else{var d=Error(l.responseText),f;for(f in a)d[f]=a[f];g(d)}}catch(D){g(D)}};h&&null!=b.data?l.send(b.data):l.send()});return!0===b.background?t:v(t)},jsonp:function(b,l){var n=h();b=g(b,l);var t=new c(function(c,g){var l=b.callbackName||
"_mithril_"+Math.round(1E16*Math.random())+"_"+m++,h=a.document.createElement("script");a[l]=function(d){h.parentNode.removeChild(h);c(q(b.type,d));delete a[l]};h.onerror=function(){h.parentNode.removeChild(h);g(Error("JSONP request failed"));delete a[l]};null==b.data&&(b.data={});b.url=d(b.url,b.data);b.data[b.callbackKey||"callback"]=l;h.src=f(b.url,b.data);a.document.documentElement.appendChild(h)});return!0===b.background?t:n(t)},setCompletionCallback:function(a){l=a}}}(window,"undefined"!==typeof Promise?
Promise:u),N=function(a){function c(e,k,a,b,c,d,f){for(;a<b;a++){var p=k[a];null!=p&&q(e,h(p,c,f),d)}}function h(e,k,a){var b=e.tag;null!=e.attrs&&y(e.attrs,e,k);if("string"===typeof b)switch(b){case "#":return e.dom=A.createTextNode(e.children);case "<":return g(e);case "[":var p=A.createDocumentFragment();null!=e.children&&(b=e.children,c(p,b,0,b.length,k,null,a));e.dom=p.firstChild;e.domSize=p.childNodes.length;return p;default:var d=e.tag;switch(e.tag){case "svg":a="http://www.w3.org/2000/svg";
break;case "math":a="http://www.w3.org/1998/Math/MathML"}var f=(b=e.attrs)&&b.is,d=a?f?A.createElementNS(a,d,{is:f}):A.createElementNS(a,d):f?A.createElement(d,{is:f}):A.createElement(d);e.dom=d;if(null!=b)for(p in f=a,b)t(e,p,null,b[p],f);null!=e.attrs&&null!=e.attrs.contenteditable?F(e):(null!=e.text&&(""!==e.text?d.textContent=e.text:e.children=[m("#",void 0,void 0,e.text,void 0,void 0)]),null!=e.children&&(p=e.children,c(d,p,0,p.length,k,null,a),k=e.attrs,"select"===e.tag&&null!=k&&("value"in
k&&t(e,"value",null,k.value,void 0),"selectedIndex"in k&&t(e,"selectedIndex",null,k.selectedIndex,void 0))));return d}else{e.state||(e.state={});C(e.state,e.tag);p=e.tag.view;if(null!=p.reentrantLock)e=M;else if(p.reentrantLock=!0,y(e.tag,e,k),e.instance=m.normalize(p.call(e.state,e)),p.reentrantLock=null,null!=e.instance){if(e.instance===e)throw Error("A view cannot return the vnode it received as arguments");k=h(e.instance,k,a);e.dom=e.instance.dom;e.domSize=null!=e.dom?e.instance.domSize:0;e=k}else e.domSize=
0,e=M;return e}}function g(e){var k={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(e.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",k=A.createElement(k);k.innerHTML=e.children;e.dom=k.firstChild;e.domSize=k.childNodes.length;e=A.createDocumentFragment();for(var a;a=k.firstChild;)e.appendChild(a);return e}function d(e,k,a,b,d,g){if(k!==a&&(null!=k||null!=a))if(null==k)c(e,a,0,a.length,b,d,void 0);else if(null==a)l(k,0,k.length,
a);else{for(var p=!1,w=0;w<a.length;w++)if(null!=a[w]){p=null==a[w].key;break}if(k.length===a.length&&p)for(w=0;w<k.length;w++)k[w]!==a[w]&&(null==k[w]?q(e,h(a[w],b,g),r(k,w+1,d)):null==a[w]?l(k,w,w+1,a):f(e,k[w],a[w],b,r(k,w+1,d),!1,g));else{a:{if(null!=k.pool&&Math.abs(k.pool.length-a.length)<=Math.abs(k.length-a.length)&&(p=a[0]&&a[0].children&&a[0].children.length||0,Math.abs((k.pool[0]&&k.pool[0].children&&k.pool[0].children.length||0)-p)<=Math.abs((k[0]&&k[0].children&&k[0].children.length||
0)-p))){p=!0;break a}p=!1}p&&(k=k.concat(k.pool));for(var t=w=0,z=k.length-1,v=a.length-1,E;z>=w&&v>=t;){var x=k[w],m=a[t];if(x!==m||p)if(null==x)w++;else if(null==m)t++;else if(x.key===m.key)w++,t++,f(e,x,m,b,r(k,w,d),p,g),p&&x.tag===m.tag&&q(e,n(x),d);else if(x=k[z],x!==m||p)if(null==x)z--;else if(null==m)t++;else if(x.key===m.key)f(e,x,m,b,r(k,z+1,d),p,g),(p||t<v)&&q(e,n(x),r(k,w,d)),z--,t++;else break;else z--,t++;else w++,t++}for(;z>=w&&v>=t;){x=k[z];m=a[v];if(x!==m||p)if(null==x)z--;else{if(null!=
m)if(x.key===m.key)f(e,x,m,b,r(k,z+1,d),p,g),p&&x.tag===m.tag&&q(e,n(x),d),null!=x.dom&&(d=x.dom),z--;else{if(!E){E=k;var x=z,B={},u;for(u=0;u<x;u++){var y=E[u];null!=y&&(y=y.key,null!=y&&(B[y]=u))}E=B}null!=m&&(x=E[m.key],null!=x?(B=k[x],f(e,B,m,b,r(k,z+1,d),p,g),q(e,n(B),d),k[x].skip=!0,null!=B.dom&&(d=B.dom)):(m=h(m,b,void 0),q(e,m,d),d=m))}v--}else z--,v--;if(v<t)break}c(e,a,t,v+1,b,d,g);l(k,w,z+1,a)}}}function f(e,a,b,c,l,z,v){var k=a.tag;if(k===b.tag){b.state=a.state;b.events=a.events;var p;
var w;null!=b.attrs&&"function"===typeof b.attrs.onbeforeupdate&&(p=b.attrs.onbeforeupdate.call(b.state,b,a));"string"!==typeof b.tag&&"function"===typeof b.tag.onbeforeupdate&&(w=b.tag.onbeforeupdate.call(b.state,b,a));void 0===p&&void 0===w||p||w?p=!1:(b.dom=a.dom,b.domSize=a.domSize,b.instance=a.instance,p=!0);if(!p)if(null!=b.attrs&&L(b.attrs,b,c,z),"string"===typeof k)switch(k){case "#":a.children.toString()!==b.children.toString()&&(a.dom.nodeValue=b.children);b.dom=a.dom;break;case "<":a.children!==
b.children?(n(a),q(e,g(b),l)):(b.dom=a.dom,b.domSize=a.domSize);break;case "[":d(e,a.children,b.children,c,l,v);a=0;c=b.children;b.dom=null;if(null!=c){for(var r=0;r<c.length;r++)e=c[r],null!=e&&null!=e.dom&&(null==b.dom&&(b.dom=e.dom),a+=e.domSize||1);1!==a&&(b.domSize=a)}break;default:e=v;l=b.dom=a.dom;switch(b.tag){case "svg":e="http://www.w3.org/2000/svg";break;case "math":e="http://www.w3.org/1998/Math/MathML"}"textarea"===b.tag&&(null==b.attrs&&(b.attrs={}),null!=b.text&&(b.attrs.value=b.text,
b.text=void 0));z=a.attrs;v=b.attrs;k=e;if(null!=v)for(r in v)t(b,r,z&&z[r],v[r],k);if(null!=z)for(r in z)null!=v&&r in v||("className"===r&&(r="class"),"o"!==r[0]||"n"!==r[1]||u(r)?"key"!==r&&b.dom.removeAttribute(r):G(b,r,void 0));null!=b.attrs&&null!=b.attrs.contenteditable?F(b):null!=a.text&&null!=b.text&&""!==b.text?a.text.toString()!==b.text.toString()&&(a.dom.firstChild.nodeValue=b.text):(null!=a.text&&(a.children=[m("#",void 0,void 0,a.text,void 0,a.dom.firstChild)]),null!=b.text&&(b.children=
[m("#",void 0,void 0,b.text,void 0,void 0)]),d(l,a.children,b.children,c,null,e))}else b.instance=m.normalize(b.tag.view.call(b.state,b)),L(b.tag,b,c,z),null!=b.instance?(null==a.instance?q(e,h(b.instance,c,v),l):f(e,a.instance,b.instance,c,l,z,v),b.dom=b.instance.dom,b.domSize=b.instance.domSize):null!=a.instance?(B(a.instance,null),b.dom=void 0,b.domSize=0):(b.dom=a.dom,b.domSize=a.domSize)}else B(a,null),q(e,h(b,c,v),l)}function n(b){var a=b.domSize;if(null!=a||null==b.dom){var e=A.createDocumentFragment();
if(0<a){for(b=b.dom;--a;)e.appendChild(b.nextSibling);e.insertBefore(b,e.firstChild)}return e}return b.dom}function r(b,a,c){for(;a<b.length;a++)if(null!=b[a]&&null!=b[a].dom)return b[a].dom;return c}function q(b,a,c){c&&c.parentNode?b.insertBefore(a,c):b.appendChild(a)}function F(b){var a=b.children;if(null!=a&&1===a.length&&"<"===a[0].tag)a=a[0].children,b.dom.innerHTML!==a&&(b.dom.innerHTML=a);else if(null!=b.text||null!=a&&0!==a.length)throw Error("Child node of a contenteditable must be trusted");
}function l(b,a,c,d){for(;a<c;a++){var e=b[a];null!=e&&(e.skip?e.skip=!1:B(e,d))}}function b(a){var b=!1;return function(){b||(b=!0,a())}}function B(a,c){function e(){if(++k===d&&(v(a),a.dom)){var b=a.domSize||1;if(1<b)for(var e=a.dom;--b;){var f=e.nextSibling,g=f.parentNode;null!=g&&g.removeChild(f)}b=a.dom;e=b.parentNode;null!=e&&e.removeChild(b);if(b=null!=c&&null==a.domSize)b=a.attrs,b=!(null!=b&&(b.oncreate||b.onupdate||b.onbeforeremove||b.onremove));b&&"string"===typeof a.tag&&(c.pool?c.pool.push(a):
c.pool=[a])}}var d=1,k=0;a.attrs&&a.attrs.onbeforeremove&&(d++,a.attrs.onbeforeremove.call(a.state,a,b(e)));"string"!==typeof a.tag&&a.tag.onbeforeremove&&(d++,a.tag.onbeforeremove.call(a.state,a,b(e)));e()}function v(a){a.attrs&&a.attrs.onremove&&a.attrs.onremove.call(a.state,a);"string"!==typeof a.tag&&a.tag.onremove&&a.tag.onremove.call(a.state,a);if(null!=a.instance)v(a.instance);else if(a=a.children,a instanceof Array)for(var b=0;b<a.length;b++){var e=a[b];null!=e&&v(e)}}function t(a,b,c,d,f){var e=
a.dom;if("key"!==b&&(c!==d||"value"===b||"checked"===b||"selectedIndex"===b||"selected"===b&&a.dom===A.activeElement||"object"===typeof d)&&"undefined"!==typeof d&&!u(b)){var k=b.indexOf(":");if(-1<k&&"xlink"===b.substr(0,k))e.setAttributeNS("http://www.w3.org/1999/xlink",b.slice(k+1),d);else if("o"===b[0]&&"n"===b[1]&&"function"===typeof d)G(a,b,d);else if("style"===b)if(a=c,a===d&&(e.style.cssText="",a=null),null==d)e.style.cssText="";else if("string"===typeof d)e.style.cssText=d;else{"string"===
typeof a&&(e.style.cssText="");for(var g in d)e.style[g]=d[g];if(null!=a&&"string"!==typeof a)for(g in a)g in d||(e.style[g]="")}else b in e&&"href"!==b&&"list"!==b&&"form"!==b&&"width"!==b&&"height"!==b&&void 0===f?"input"===a.tag&&"value"===b&&a.dom.value===d&&a.dom===A.activeElement||"select"===a.tag&&"value"===b&&a.dom.value===d&&a.dom===A.activeElement||"option"===a.tag&&"value"===b&&a.dom.value===d||(e[b]=d):"boolean"===typeof d?d?e.setAttribute(b,""):e.removeAttribute(b):e.setAttribute("className"===
b?"class":b,d)}}function u(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function G(a,b,d){var c=a.dom,e="function"!==typeof D?d:function(a){var b=d.call(c,a);D.call(c,a);return b};if(b in c)c[b]="function"===typeof d?e:null;else{var f=b.slice(2);void 0===a.events&&(a.events={});a.events[b]!==e&&(null!=a.events[b]&&c.removeEventListener(f,a.events[b],!1),"function"===typeof d&&(a.events[b]=e,c.addEventListener(f,a.events[b],!1)))}}
function y(a,b,c){"function"===typeof a.oninit&&a.oninit.call(b.state,b);"function"===typeof a.oncreate&&c.push(a.oncreate.bind(b.state,b))}function L(a,b,c,d){d?y(a,b,c):"function"===typeof a.onupdate&&c.push(a.onupdate.bind(b.state,b))}function C(a,b){Object.keys(b).forEach(function(c){a[c]=b[c]})}var A=a.document,M=A.createDocumentFragment(),D;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],e=A.activeElement;
null==a.vnodes&&(a.textContent="");b instanceof Array||(b=[b]);d(a,a.vnodes,m.normalizeChildren(b),c,null,void 0);a.vnodes=b;for(var f=0;f<c.length;f++)c[f]();A.activeElement!==e&&e.focus()},setEventCallback:function(a){return D=a}}},H=function(a){function c(a){a=g.indexOf(a);-1<a&&g.splice(a,2)}function h(){for(var a=1;a<g.length;a+=2)g[a]()}a=N(a);a.setEventCallback(function(a){!1!==a.redraw&&h()});var g=[];return{subscribe:function(a,f){c(a);g.push(a,P(f))},unsubscribe:c,redraw:h,render:a.render}}(window);
J.setCompletionCallback(H.redraw);y.mount=function(a){return function(c,h){if(null===h)a.render(c,[]),a.unsubscribe(c);else{if(null==h.view)throw Error("m.mount(element, component) expects a component, not a vnode");a.subscribe(c,function(){a.render(c,m(h))});a.redraw()}}}(H);var K=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var c={},h={},g=0;g<a.length;g++){var d=a[g].split("="),f=decodeURIComponent(d[0]),d=2===d.length?decodeURIComponent(d[1]):"";
"true"===d?d=!0:"false"===d&&(d=!1);var n=f.split(/\]\[?|\[/),m=c;-1<f.indexOf("[")&&n.pop();for(var q=0;q<n.length;q++){var f=n[q],u=n[q+1],u=""==u||!isNaN(parseInt(u,10)),l=q===n.length-1;""===f&&(f=n.slice(0,q).join(),null==h[f]&&(h[f]=0),f=h[f]++);null==m[f]&&(m[f]=l?d:u?[]:{});m=m[f]}}return c},Q=function(a){function c(c){var b=a.location[c].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===c&&"/"!==b[0]&&(b="/"+b);return b}function h(a){return function(){null==u&&(u=r(function(){u=
null;a()}))}}function g(a,b,c){var d=a.indexOf("?"),f=a.indexOf("#"),g=-1<d?d:-1<f?f:a.length;if(-1<d){var d=K(a.slice(d+1,-1<f?f:a.length)),h;for(h in d)b[h]=d[h]}if(-1<f)for(h in b=K(a.slice(f+1)),b)c[h]=b[h];return a.slice(0,g)}function d(){switch(q.charAt(0)){case "#":return c("hash").slice(q.length);case "?":return c("search").slice(q.length)+c("hash");default:return c("pathname").slice(q.length)+c("search")+c("hash")}}function f(c,b,d){var f={},h={};c=g(c,f,h);if(null!=b){for(var l in b)f[l]=
b[l];c=c.replace(/:([^\/]+)/g,function(a,c){delete f[c];return b[c]})}(l=C(f))&&(c+="?"+l);(h=C(h))&&(c+="#"+h);m?(d&&d.replace?a.history.replaceState(null,null,q+c):a.history.pushState(null,null,q+c),a.onpopstate(!0)):a.location.href=q+c}var m="function"===typeof a.history.pushState,r="function"===typeof setImmediate?setImmediate:setTimeout,q="#!",u;return{setPrefix:function(a){q=a},getPath:d,setPath:f,defineRoutes:function(c,b,f){function l(){var a=d(),h={},l=g(a,h,h),m;for(m in c){var n=new RegExp("^"+
m.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(n.test(l)){l.replace(n,function(){for(var d=m.match(/:[^\/]+/g)||[],f=[].slice.call(arguments,1,-2),g=0;g<d.length;g++)h[d[g].replace(/:|\./g,"")]=decodeURIComponent(f[g]);b(c[m],h,a,m)});return}}f(a,h)}m?a.onpopstate=h(l):"#"===q.charAt(0)&&(a.onhashchange=l);l()},link:function(a){a.dom.setAttribute("href",q+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=
!1,a=this.getAttribute("href"),0===a.indexOf(q)&&(a=a.slice(q.length)),f(a,void 0,void 0))}}}};y.route=function(a,c){var h=Q(a),g=function(a){return a},d={},f=function(a,f,q){if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var n=function(a,c,f,h){d={resolver:a,component:c,params:f,path:h,resolve:null};d.resolver.render=a.render||g;l()},l=function(){null!=d.resolver&&c.render(a,d.resolver.render(m(d.component,d.params.key,d.params)))};h.defineRoutes(q,
function(a,c,f){a.view?n({},a,c,f):a.onmatch?null!=d.resolve?n(a,d.component,c,f):(d.resolve=function(b){n(a,b,c,f)},a.onmatch(function(a){null!=d.resolve&&d.resolve(a)},c,f)):n(a,"div",c,f)},function(){h.setPath(f)});c.subscribe(a,l)};f.set=h.setPath;f.get=function(){return d.path};f.prefix=h.setPrefix;f.link=h.link;return f}(window,H);y.withAttr=function(a,c,h){return function(g){return c.call(h||this,a in g.currentTarget?g.currentTarget[a]:g.currentTarget.getAttribute(a))}};var R=N(window);y.render=
R.render;y.redraw=H.redraw;y.request=J.request;y.jsonp=J.jsonp;y.parseQueryString=K;y.buildQueryString=C;y.version="1.0.0-rc.6";"undefined"!==typeof module?module.exports=y:window.m=y};