new function(){function x(a,c,k,d,h,n){return{tag:a,key:c,attrs:k,children:d,text:h,dom:n,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function A(a){if(null==a||"string"!==typeof a&&"function"!==typeof a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a&&void 0===G[a]){for(var c,k,d=[],h={};c=N.exec(a);){var n=c[1],l=c[2];""===n&&""!==l?k=l:"#"===n?h.id=l:"."===n?d.push(l):"["===c[3][0]&&((n=c[6])&&(n=n.replace(/\\(["'])/g,"$1").replace(/\\\\/g,
"\\")),"class"===c[4]?d.push(n):h[c[4]]=n||!0)}0<d.length&&(h.className=d.join(" "));G[a]=function(a,c){var n=!1,b,u,d=a.className||a["class"],p;for(p in h)a[p]=h[p];void 0!==d&&(void 0!==a["class"]&&(a["class"]=void 0,a.className=d),void 0!==h.className&&(a.className=h.className+" "+d));for(p in a)if("key"!==p){n=!0;break}Array.isArray(c)&&1==c.length&&null!=c[0]&&"#"===c[0].tag?u=c[0].children:b=c;return x(k||"div",a.key,n?a:void 0,b,u,void 0)}}var p;null==arguments[1]||"object"===typeof arguments[1]&&
void 0===arguments[1].tag&&!Array.isArray(arguments[1])?(p=arguments[1],d=2):d=1;if(arguments.length===d+1)c=Array.isArray(arguments[d])?arguments[d]:[arguments[d]];else for(c=[];d<arguments.length;d++)c.push(arguments[d]);return"string"===typeof a?G[a](p||{},x.normalizeChildren(c)):x(a,p&&p.key,p||{},x.normalizeChildren(c),void 0,void 0)}function O(a){var c=0,k=null,d="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var h=Date.now();0===c||16<=h-c?(c=h,
a()):null===k&&(k=d(function(){k=null;a();c=Date.now()},16-(h-c)))}}x.normalize=function(a){return Array.isArray(a)?x("[",void 0,void 0,x.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?x("#",void 0,void 0,!1===a?"":a,void 0,void 0):a};x.normalizeChildren=function(a){for(var c=0;c<a.length;c++)a[c]=x.normalize(a[c]);return a};var N=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,G={};A.trust=function(a){null==a&&(a="");return x("<",void 0,void 0,a,void 0,
void 0)};A.fragment=function(a,c){return x("[",a.key,a,x.normalizeChildren(c),void 0,void 0)};var m=function(a){function c(a,b){return function w(c){var l;try{if(!b||null==c||"object"!==typeof c&&"function"!==typeof c||"function"!==typeof(l=c.then))r(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",c);for(var d=0;d<a.length;d++)a[d](c);h.length=0;n.length=0;u.state=b;u.retry=function(){w(c)}});else{if(c===d)throw new TypeError("Promise can't be resolved w/ itself");
k(l.bind(c))}}catch(P){p(P)}}}function k(a){function b(b){return function(a){0<c++||b(a)}}var c=0,d=b(p);try{a(b(l),d)}catch(C){d(C)}}if(!(this instanceof m))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");var d=this,h=[],n=[],l=c(h,!0),p=c(n,!1),u=d._instance={resolvers:h,rejectors:n},r="function"===typeof setImmediate?setImmediate:setTimeout;k(a)};m.prototype.then=function(a,c){function k(a,c,k,l){c.push(function(b){if("function"!==
typeof a)k(b);else try{h(a(b))}catch(z){n&&n(z)}});"function"===typeof d.retry&&l===d.state&&d.retry()}var d=this._instance,h,n,l=new m(function(a,c){h=a;n=c});k(a,d.resolvers,h,!0);k(c,d.rejectors,n,!1);return l};m.prototype["catch"]=function(a){return this.then(null,a)};m.resolve=function(a){return a instanceof m?a:new m(function(c){c(a)})};m.reject=function(a){return new m(function(c,k){k(a)})};m.all=function(a){return new m(function(c,k){var d=a.length,h=0,n=[];if(0===a.length)c([]);else for(var l=
0;l<a.length;l++)(function(l){function u(a){h++;n[l]=a;h===d&&c(n)}null==a[l]||"object"!==typeof a[l]&&"function"!==typeof a[l]||"function"!==typeof a[l].then?u(a[l]):a[l].then(u,k)})(l)})};m.race=function(a){return new m(function(c,k){for(var d=0;d<a.length;d++)a[d].then(c,k)})};"undefined"!==typeof window?("undefined"===typeof window.Promise&&(window.Promise=m),m=window.Promise):"undefined"!==typeof global&&("undefined"===typeof global.Promise&&(global.Promise=m),m=global.Promise);var E=function(a){function c(a,
d){if(Array.isArray(d))for(var h=0;h<d.length;h++)c(a+"["+h+"]",d[h]);else if("[object Object]"===Object.prototype.toString.call(d))for(h in d)c(a+"["+h+"]",d[h]);else k.push(encodeURIComponent(a)+(null!=d&&""!==d?"="+encodeURIComponent(d):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var k=[],d;for(d in a)c(d,a[d]);return k.join("&")},I=function(a,c){function k(){function b(){0===--a&&"function"===typeof v&&v()}var a=0;return function C(c){var d=c.then;c.then=function(){a++;
var h=d.apply(c,arguments);h.then(b,function(c){b();if(0===a)throw c;});return C(h)};return c}}function d(b,a){if("string"===typeof b){var c=b;b=a||{};null==b.url&&(b.url=c)}return b}function h(b,a){if(null==a)return b;for(var c=b.match(/:[^\/]+/gi)||[],d=0;d<c.length;d++){var h=c[d].slice(1);null!=a[h]&&(b=b.replace(c[d],a[h]))}return b}function n(b,a){var c=E(a);if(""!==c){var d=0>b.indexOf("?")?"?":"&";b+=d+c}return b}function l(b){try{return""!==b?JSON.parse(b):null}catch(z){throw Error(b);}}
function p(b){return b.responseText}function u(b,a){if("function"===typeof b)if(Array.isArray(a))for(var c=0;c<a.length;c++)a[c]=new b(a[c]);else return new b(a);return a}var r=0,v;return{request:function(b,v){var r=k();b=d(b,v);var z=new c(function(c,d){null==b.method&&(b.method="GET");b.method=b.method.toUpperCase();var k="boolean"===typeof b.useBody?b.useBody:"GET"!==b.method&&"TRACE"!==b.method;"function"!==typeof b.serialize&&(b.serialize="undefined"!==typeof FormData&&b.data instanceof FormData?
function(a){return a}:JSON.stringify);"function"!==typeof b.deserialize&&(b.deserialize=l);"function"!==typeof b.extract&&(b.extract=p);b.url=h(b.url,b.data);k?b.data=b.serialize(b.data):b.url=n(b.url,b.data);var q=new a.XMLHttpRequest;q.open(b.method,b.url,"boolean"===typeof b.async?b.async:!0,"string"===typeof b.user?b.user:void 0,"string"===typeof b.password?b.password:void 0);b.serialize===JSON.stringify&&k&&q.setRequestHeader("Content-Type","application/json; charset=utf-8");b.deserialize===
l&&q.setRequestHeader("Accept","application/json, text/*");b.withCredentials&&(q.withCredentials=b.withCredentials);for(var v in b.headers)({}).hasOwnProperty.call(b.headers,v)&&q.setRequestHeader(v,b.headers[v]);"function"===typeof b.config&&(q=b.config(q,b)||q);q.onreadystatechange=function(){if(q.status&&4===q.readyState)try{var a=b.extract!==p?b.extract(q,b):b.deserialize(b.extract(q,b));if(200<=q.status&&300>q.status||304===q.status)c(u(b.type,a));else{var g=Error(q.responseText),e;for(e in a)g[e]=
a[e];d(g)}}catch(f){d(f)}};k&&null!=b.data?q.send(b.data):q.send()});return!0===b.background?z:r(z)},jsonp:function(b,l){var p=k();b=d(b,l);var v=new c(function(c,d){var k=b.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+r++,l=a.document.createElement("script");a[k]=function(d){l.parentNode.removeChild(l);c(u(b.type,d));delete a[k]};l.onerror=function(){l.parentNode.removeChild(l);d(Error("JSONP request failed"));delete a[k]};null==b.data&&(b.data={});b.url=h(b.url,b.data);b.data[b.callbackKey||
"callback"]=k;l.src=n(b.url,b.data);a.document.documentElement.appendChild(l)});return!0===b.background?v:p(v)},setCompletionCallback:function(a){v=a}}}(window,m),M=function(a){function c(g,e,a,b,c,d,h){for(;a<b;a++){var f=e[a];null!=f&&u(g,k(f,c,h),d)}}function k(g,e,a){var b=g.tag;null!=g.attrs&&m(g.attrs,g,e);if("string"===typeof b)switch(b){case "#":return g.dom=q.createTextNode(g.children);case "<":return d(g);case "[":var f=q.createDocumentFragment();null!=g.children&&(b=g.children,c(f,b,0,
b.length,e,null,a));g.dom=f.firstChild;g.domSize=f.childNodes.length;return f;default:var h=g.tag;switch(g.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}var l=(b=g.attrs)&&b.is,h=a?l?q.createElementNS(a,h,{is:l}):q.createElementNS(a,h):l?q.createElement(h,{is:l}):q.createElement(h);g.dom=h;if(null!=b)for(f in l=a,b)w(g,f,null,b[f],l);null!=g.attrs&&null!=g.attrs.contenteditable?r(g):(null!=g.text&&(""!==g.text?h.textContent=g.text:g.children=
[x("#",void 0,void 0,g.text,void 0,void 0)]),null!=g.children&&(f=g.children,c(h,f,0,f.length,e,null,a),e=g.attrs,"select"===g.tag&&null!=e&&("value"in e&&w(g,"value",null,e.value,void 0),"selectedIndex"in e&&w(g,"selectedIndex",null,e.selectedIndex,void 0))));return h}else{g.state=Object.create(g.tag);f=g.tag.view;if(null!=f.reentrantLock)g=L;else if(f.reentrantLock=!0,m(g.tag,g,e),g.instance=x.normalize(f.call(g.state,g)),f.reentrantLock=null,null!=g.instance){if(g.instance===g)throw Error("A view cannot return the vnode it received as arguments");
e=k(g.instance,e,a);g.dom=g.instance.dom;g.domSize=null!=g.dom?g.instance.domSize:0;g=e}else g.domSize=0,g=L;return g}}function d(g){var e={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(g.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",e=q.createElement(e);e.innerHTML=g.children;g.dom=e.firstChild;g.domSize=e.childNodes.length;g=q.createDocumentFragment();for(var a;a=e.firstChild;)g.appendChild(a);return g}function h(g,e,a,b,
d,h){if(e!==a&&(null!=e||null!=a))if(null==e)c(g,a,0,a.length,b,d,void 0);else if(null==a)v(e,0,e.length,a);else{if(e.length===a.length){for(var f=!1,t=0;t<a.length;t++)if(null!=a[t]&&null!=e[t]){f=null==a[t].key&&null==e[t].key;break}if(f){for(t=0;t<e.length;t++)e[t]!==a[t]&&(null==e[t]&&null!=a[t]?u(g,k(a[t],b,h),p(e,t+1,d)):null==a[t]?v(e,t,t+1,a):n(g,e[t],a[t],b,p(e,t+1,d),!1,h));return}}a:{if(null!=e.pool&&Math.abs(e.pool.length-a.length)<=Math.abs(e.length-a.length)&&(f=a[0]&&a[0].children&&
a[0].children.length||0,Math.abs((e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0)-f)<=Math.abs((e[0]&&e[0].children&&e[0].children.length||0)-f))){f=!0;break a}f=!1}f&&(e=e.concat(e.pool));for(var q=t=0,r=e.length-1,z=a.length-1,D;r>=t&&z>=q;){var y=e[t],w=a[q];if(y!==w||f)if(null==y)t++;else if(null==w)q++;else if(y.key===w.key)t++,q++,n(g,y,w,b,p(e,t,d),f,h),f&&y.tag===w.tag&&u(g,l(y),d);else if(y=e[r],y!==w||f)if(null==y)r--;else if(null==w)q++;else if(y.key===w.key)n(g,y,w,b,p(e,
r+1,d),f,h),(f||q<z)&&u(g,l(y),p(e,t,d)),r--,q++;else break;else r--,q++;else t++,q++}for(;r>=t&&z>=q;){y=e[r];w=a[z];if(y!==w||f)if(null==y)r--;else{if(null!=w)if(y.key===w.key)n(g,y,w,b,p(e,r+1,d),f,h),f&&y.tag===w.tag&&u(g,l(y),d),null!=y.dom&&(d=y.dom),r--;else{if(!D){D=e;var y=r,B={},m;for(m=0;m<y;m++){var x=D[m];null!=x&&(x=x.key,null!=x&&(B[x]=m))}D=B}null!=w&&(y=D[w.key],null!=y?(B=e[y],n(g,B,w,b,p(e,r+1,d),f,h),u(g,l(B),d),e[y].skip=!0,null!=B.dom&&(d=B.dom)):(w=k(w,b,void 0),u(g,w,d),d=
w))}z--}else r--,z--;if(z<q)break}c(g,a,q,z+1,b,d,h);v(e,t,r+1,a)}}function n(a,e,f,c,q,v,p){var g=e.tag;if(g===f.tag){f.state=e.state;f.events=e.events;var t;var z;null!=f.attrs&&"function"===typeof f.attrs.onbeforeupdate&&(t=f.attrs.onbeforeupdate.call(f.state,f,e));"string"!==typeof f.tag&&"function"===typeof f.tag.onbeforeupdate&&(z=f.tag.onbeforeupdate.call(f.state,f,e));void 0===t&&void 0===z||t||z?t=!1:(f.dom=e.dom,f.domSize=e.domSize,f.instance=e.instance,t=!0);if(!t)if(null!=f.attrs&&A(f.attrs,
f,c,v),"string"===typeof g)switch(g){case "#":e.children.toString()!==f.children.toString()&&(e.dom.nodeValue=f.children);f.dom=e.dom;break;case "<":e.children!==f.children?(l(e),u(a,d(f),q)):(f.dom=e.dom,f.domSize=e.domSize);break;case "[":h(a,e.children,f.children,c,q,p);e=0;c=f.children;f.dom=null;if(null!=c){for(var m=0;m<c.length;m++)a=c[m],null!=a&&null!=a.dom&&(null==f.dom&&(f.dom=a.dom),e+=a.domSize||1);1!==e&&(f.domSize=e)}break;default:a=p;q=f.dom=e.dom;switch(f.tag){case "svg":a="http://www.w3.org/2000/svg";
break;case "math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===f.tag&&(null==f.attrs&&(f.attrs={}),null!=f.text&&(f.attrs.value=f.text,f.text=void 0));v=e.attrs;p=f.attrs;g=a;if(null!=p)for(m in p)w(f,m,v&&v[m],p[m],g);if(null!=v)for(m in v)null!=p&&m in p||("className"===m&&(m="class"),"o"!==m[0]||"n"!==m[1]||C(m)?"key"!==m&&f.dom.removeAttribute(m):K(f,m,void 0));null!=f.attrs&&null!=f.attrs.contenteditable?r(f):null!=e.text&&null!=f.text&&""!==f.text?e.text.toString()!==f.text.toString()&&
(e.dom.firstChild.nodeValue=f.text):(null!=e.text&&(e.children=[x("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=f.text&&(f.children=[x("#",void 0,void 0,f.text,void 0,void 0)]),h(q,e.children,f.children,c,null,a))}else f.instance=x.normalize(f.tag.view.call(f.state,f)),A(f.tag,f,c,v),null!=f.instance?(null==e.instance?u(a,k(f.instance,c,p),q):n(a,e.instance,f.instance,c,q,v,p),f.dom=f.instance.dom,f.domSize=f.instance.domSize):null!=e.instance?(b(e.instance,null),f.dom=void 0,f.domSize=
0):(f.dom=e.dom,f.domSize=e.domSize)}else b(e,null),u(a,k(f,c,p),q)}function l(a){var g=a.domSize;if(null!=g||null==a.dom){var b=q.createDocumentFragment();if(0<g){for(a=a.dom;--g;)b.appendChild(a.nextSibling);b.insertBefore(a,b.firstChild)}return b}return a.dom}function p(a,e,b){for(;e<a.length;e++)if(null!=a[e]&&null!=a[e].dom)return a[e].dom;return b}function u(a,e,b){b&&b.parentNode?a.insertBefore(e,b):a.appendChild(e)}function r(a){var e=a.children;if(null!=e&&1===e.length&&"<"===e[0].tag)e=
e[0].children,a.dom.innerHTML!==e&&(a.dom.innerHTML=e);else if(null!=a.text||null!=e&&0!==e.length)throw Error("Child node of a contenteditable must be trusted");}function v(a,e,f,c){for(;e<f;e++){var g=a[e];null!=g&&(g.skip?g.skip=!1:b(g,c))}}function b(a,e){function b(){if(++c===g&&(z(a),a.dom)){var b=a.domSize||1;if(1<b)for(var f=a.dom;--b;){var d=f.nextSibling,h=d.parentNode;null!=h&&h.removeChild(d)}b=a.dom;f=b.parentNode;null!=f&&f.removeChild(b);if(b=null!=e&&null==a.domSize)b=a.attrs,b=!(null!=
b&&(b.oncreate||b.onupdate||b.onbeforeremove||b.onremove));b&&"string"===typeof a.tag&&(e.pool?e.pool.push(a):e.pool=[a])}}var g=1,c=0;if(a.attrs&&a.attrs.onbeforeremove){var d=a.attrs.onbeforeremove.call(a.state,a);null!=d&&"function"===typeof d.then&&(g++,d.then(b,b))}"string"!==typeof a.tag&&a.tag.onbeforeremove&&(d=a.tag.onbeforeremove.call(a.state,a),null!=d&&"function"===typeof d.then&&(g++,d.then(b,b)));b()}function z(a){a.attrs&&a.attrs.onremove&&a.attrs.onremove.call(a.state,a);"string"!==
typeof a.tag&&a.tag.onremove&&a.tag.onremove.call(a.state,a);if(null!=a.instance)z(a.instance);else if(a=a.children,Array.isArray(a))for(var b=0;b<a.length;b++){var g=a[b];null!=g&&z(g)}}function w(a,b,c,d,h){var e=a.dom;if("key"!==b&&"is"!==b&&(c!==d||"value"===b||"checked"===b||"selectedIndex"===b||"selected"===b&&a.dom===q.activeElement||"object"===typeof d)&&"undefined"!==typeof d&&!C(b)){var g=b.indexOf(":");if(-1<g&&"xlink"===b.substr(0,g))e.setAttributeNS("http://www.w3.org/1999/xlink",b.slice(g+
1),d);else if("o"===b[0]&&"n"===b[1]&&"function"===typeof d)K(a,b,d);else if("style"===b)if(a=c,a===d&&(e.style.cssText="",a=null),null==d)e.style.cssText="";else if("string"===typeof d)e.style.cssText=d;else{"string"===typeof a&&(e.style.cssText="");for(var f in d)e.style[f]=d[f];if(null!=a&&"string"!==typeof a)for(f in a)f in d||(e.style[f]="")}else b in e&&"href"!==b&&"list"!==b&&"form"!==b&&"width"!==b&&"height"!==b&&void 0===h&&!(a.attrs.is||-1<a.tag.indexOf("-"))?"input"===a.tag&&"value"===
b&&a.dom.value===d&&a.dom===q.activeElement||"select"===a.tag&&"value"===b&&a.dom.value===d&&a.dom===q.activeElement||"option"===a.tag&&"value"===b&&a.dom.value===d||(e[b]=d):"boolean"===typeof d?d?e.setAttribute(b,""):e.removeAttribute(b):e.setAttribute("className"===b?"class":b,d)}}function C(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function K(a,b,d){var e=a.dom,c="function"!==typeof H?d:function(a){var b=d.call(e,a);H.call(e,
a);return b};if(b in e)e[b]="function"===typeof d?c:null;else{var f=b.slice(2);void 0===a.events&&(a.events={});a.events[b]!==c&&(null!=a.events[b]&&e.removeEventListener(f,a.events[b],!1),"function"===typeof d&&(a.events[b]=c,e.addEventListener(f,a.events[b],!1)))}}function m(a,b,d){"function"===typeof a.oninit&&a.oninit.call(b.state,b);"function"===typeof a.oncreate&&d.push(a.oncreate.bind(b.state,b))}function A(a,b,d,c){c?m(a,b,d):"function"===typeof a.onupdate&&d.push(a.onupdate.bind(b.state,
b))}var q=a.document,L=q.createDocumentFragment(),H;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var d=[],e=q.activeElement;null==a.vnodes&&(a.textContent="");Array.isArray(b)||(b=[b]);h(a,a.vnodes,x.normalizeChildren(b),d,null,void 0);a.vnodes=b;for(var c=0;c<d.length;c++)d[c]();q.activeElement!==e&&e.focus()},setEventCallback:function(a){return H=a}}},F=function(a){function c(a){a=d.indexOf(a);-1<a&&d.splice(a,
2)}function k(){for(var a=1;a<d.length;a+=2)d[a]()}a=M(a);a.setEventCallback(function(a){!1!==a.redraw&&k()});var d=[];return{subscribe:function(a,k){c(a);d.push(a,O(k))},unsubscribe:c,redraw:k,render:a.render}}(window);I.setCompletionCallback(F.redraw);A.mount=function(a){return function(c,k){if(null===k)a.render(c,[]),a.unsubscribe(c);else{if(null==k.view)throw Error("m.mount(element, component) expects a component, not a vnode");a.subscribe(c,function(){a.render(c,x(k))});a.redraw()}}}(F);var Q=
m,J=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var c={},k={},d=0;d<a.length;d++){var h=a[d].split("="),n=decodeURIComponent(h[0]),h=2===h.length?decodeURIComponent(h[1]):"";"true"===h?h=!0:"false"===h&&(h=!1);var l=n.split(/\]\[?|\[/),p=c;-1<n.indexOf("[")&&l.pop();for(var u=0;u<l.length;u++){var n=l[u],r=l[u+1],r=""==r||!isNaN(parseInt(r,10)),v=u===l.length-1;""===n&&(n=l.slice(0,u).join(),null==k[n]&&(k[n]=0),n=k[n]++);null==p[n]&&(p[n]=v?h:r?[]:
{});p=p[n]}}return c},R=function(a){function c(d){var c=a.location[d].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===d&&"/"!==c[0]&&(c="/"+c);return c}function k(a){return function(){null==l&&(l=n(function(){l=null;a()}))}}function d(a,d,c){var b=a.indexOf("?"),h=a.indexOf("#"),k=-1<b?b:-1<h?h:a.length;if(-1<b){var b=J(a.slice(b+1,-1<h?h:a.length)),l;for(l in b)d[l]=b[l]}if(-1<h)for(l in d=J(a.slice(h+1)),d)c[l]=d[l];return a.slice(0,k)}var h="function"===typeof a.history.pushState,
n="function"===typeof setImmediate?setImmediate:setTimeout,l,p={prefix:"#!",getPath:function(){switch(p.prefix.charAt(0)){case "#":return c("hash").slice(p.prefix.length);case "?":return c("search").slice(p.prefix.length)+c("hash");default:return c("pathname").slice(p.prefix.length)+c("search")+c("hash")}},setPath:function(c,l,k){var b={},n={};c=d(c,b,n);if(null!=l){for(var m in l)b[m]=l[m];c=c.replace(/:([^\/]+)/g,function(a,c){delete b[c];return l[c]})}(m=E(b))&&(c+="?"+m);(n=E(n))&&(c+="#"+n);
h?(n=k?k.state:null,m=k?k.title:null,a.onpopstate(),k&&k.replace?a.history.replaceState(n,m,p.prefix+c):a.history.pushState(n,m,p.prefix+c)):a.location.href=p.prefix+c},defineRoutes:function(c,l,n){function b(){var b=p.getPath(),h={},k=d(b,h,h),m=a.history.state;if(null!=m)for(var v in m)h[v]=m[v];for(var r in c)if(m=new RegExp("^"+r.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),m.test(k)){k.replace(m,function(){for(var a=r.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,
1,-2),k=0;k<a.length;k++)h[a[k].replace(/:|\./g,"")]=decodeURIComponent(d[k]);l(c[r],h,b,r)});return}n(b,h)}h?a.onpopstate=k(b):"#"===p.prefix.charAt(0)&&(a.onhashchange=b);b()}};return p};A.route=function(a,c){var k=R(a),d=function(a){return a},h,n,l,m,u,r=function(a,b,p){if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var r=function(){null!=h&&c.render(a,h(x(n,l.key,l)))},v=function(a){if(a!==b)k.setPath(b,null,{replace:!0});else throw Error("Could not resolve default route "+
b);};k.defineRoutes(p,function(a,b,c){var k=u=function(a,p){k===u&&(n=null!=p&&"function"===typeof p.view?p:"div",l=b,m=c,u=null,h=(a.render||d).bind(a),r())};a.view?k({},a):a.onmatch?Q.resolve(a.onmatch(b,c)).then(function(b){k(a,b)},v):k(a,"div")},v);c.subscribe(a,r)};r.set=function(a,b,c){null!=u&&(c={replace:!0});u=null;k.setPath(a,b,c)};r.get=function(){return m};r.prefix=function(a){k.prefix=a};r.link=function(a){a.dom.setAttribute("href",k.prefix+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||
a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=!1,a=this.getAttribute("href"),0===a.indexOf(k.prefix)&&(a=a.slice(k.prefix.length)),r.set(a,void 0,void 0))}};r.param=function(a){return"undefined"!==typeof l&&"undefined"!==typeof a?l[a]:l};return r}(window,F);A.withAttr=function(a,c,k){return function(d){c.call(k||this,a in d.currentTarget?d.currentTarget[a]:d.currentTarget.getAttribute(a))}};var S=M(window);A.render=S.render;A.redraw=F.redraw;A.request=I.request;A.jsonp=I.jsonp;
A.parseQueryString=J;A.buildQueryString=E;A.version="1.0.0";A.vnode=x;"undefined"!==typeof module?module.exports=A:window.m=A};