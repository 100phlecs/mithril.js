new function(){function m(a,b,k,d,l,h){return{tag:a,key:b,attrs:k,children:d,text:l,dom:h,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function t(a){if(null==a||"string"!==typeof a&&null==a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a&&void 0===H[a]){for(var b,k,d=[],l={};b=O.exec(a);){var h=b[1],v=b[2];""===h&&""!==v?k=v:"#"===h?l.id=v:"."===h?d.push(v):"["===b[3][0]&&((h=b[6])&&(h=h.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
"class"===b[4]?d.push(h):l[b[4]]=h||!0)}0<d.length&&(l.className=d.join(" "));H[a]=function(a,b){var d=!1,h,g,w=a.className||a["class"],n;for(n in l)a[n]=l[n];void 0!==w&&(void 0!==a["class"]&&(a["class"]=void 0,a.className=w),void 0!==l.className&&(a.className=l.className+" "+w));for(n in a)if("key"!==n){d=!0;break}Array.isArray(b)&&1==b.length&&null!=b[0]&&"#"===b[0].tag?g=b[0].children:h=b;return m(k||"div",a.key,d?a:void 0,h,g,void 0)}}var p;null==arguments[1]||"object"===typeof arguments[1]&&
void 0===arguments[1].tag&&!Array.isArray(arguments[1])?(p=arguments[1],d=2):d=1;if(arguments.length===d+1)b=Array.isArray(arguments[d])?arguments[d]:[arguments[d]];else for(b=[];d<arguments.length;d++)b.push(arguments[d]);return"string"===typeof a?H[a](p||{},m.normalizeChildren(b)):m(a,p&&p.key,p||{},m.normalizeChildren(b),void 0,void 0)}m.normalize=function(a){return Array.isArray(a)?m("[",void 0,void 0,m.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?m("#",void 0,void 0,a,void 0,
void 0):a};m.normalizeChildren=function(a){for(var b=0;b<a.length;b++)a[b]=m.normalize(a[b]);return a};var O=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,H={};t.trust=function(a){null==a&&(a="");return m("<",void 0,void 0,a,void 0,void 0)};t.fragment=function(a,b){return m("[",a.key,a,m.normalizeChildren(b),void 0,void 0)};var y=function(a){function b(a,b){return function w(n){var u;try{if(!b||null==n||"object"!==typeof n&&"function"!==typeof n||"function"!==typeof(u=
n.then))m(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",n);for(var d=0;d<a.length;d++)a[d](n);l.length=0;h.length=0;r.state=b;r.retry=function(){w(n)}});else{if(n===d)throw new TypeError("Promise can't be resolved w/ itself");k(u.bind(n))}}catch(F){p(F)}}}function k(a){function b(a){return function(b){0<g++||a(b)}}var g=0,d=b(p);try{a(b(v),d)}catch(n){d(n)}}if(!(this instanceof y))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");
var d=this,l=[],h=[],v=b(l,!0),p=b(h,!1),r=d._instance={resolvers:l,rejectors:h},m="function"===typeof setImmediate?setImmediate:setTimeout;k(a)};y.prototype.then=function(a,b){function k(a,b,k,u){b.push(function(b){if("function"!==typeof a)k(b);else try{l(a(b))}catch(g){h&&h(g)}});"function"===typeof d.retry&&u===d.state&&d.retry()}var d=this._instance,l,h,v=new y(function(a,b){l=a;h=b});k(a,d.resolvers,l,!0);k(b,d.rejectors,h,!1);return v};y.prototype["catch"]=function(a){return this.then(null,
a)};y.resolve=function(a){return a instanceof y?a:new y(function(b){b(a)})};y.reject=function(a){return new y(function(b,k){k(a)})};y.all=function(a){return new y(function(b,k){var d=a.length,l=0,h=[];if(0===a.length)b([]);else for(var v=0;v<a.length;v++)(function(v){function r(a){l++;h[v]=a;l===d&&b(h)}null==a[v]||"object"!==typeof a[v]&&"function"!==typeof a[v]||"function"!==typeof a[v].then?r(a[v]):a[v].then(r,k)})(v)})};y.race=function(a){return new y(function(b,k){for(var d=0;d<a.length;d++)a[d].then(b,
k)})};"undefined"===typeof Promise&&("undefined"!==typeof window?window.Promise=y:"undefined"!==typeof global&&(global.Promise=y));var C=function(a){function b(a,d){if(Array.isArray(d))for(var h=0;h<d.length;h++)b(a+"["+h+"]",d[h]);else if("[object Object]"===Object.prototype.toString.call(d))for(h in d)b(a+"["+h+"]",d[h]);else k.push(encodeURIComponent(a)+(null!=d&&""!==d?"="+encodeURIComponent(d):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var k=[],d;for(d in a)b(d,a[d]);
return k.join("&")},I=function(a,b){function k(){0===--u&&"function"===typeof q&&q()}function d(a){var g=a.then;a.then=function(){u++;var b=g.apply(a,arguments);b.then(k,function(a){k();throw a;});return d(b)};return a}function l(a,b){if(null==b)return a;for(var g=a.match(/:[^\/]+/gi)||[],d=0;d<g.length;d++){var h=g[d].slice(1);null!=b[h]&&(a=a.replace(g[d],b[h]),delete b[h])}return a}function h(a,b){var g=C(b);if(""!==g){var d=0>a.indexOf("?")?"?":"&";a+=d+g}return a}function v(a){try{return""!==
a?JSON.parse(a):null}catch(w){throw Error(a);}}function p(a){return a.responseText}function r(a,b){if("function"===typeof a)if(Array.isArray(b))for(var d=0;d<b.length;d++)b[d]=new a(b[d]);else return new a(b);return b}var m=0,u=0,q;return{request:function(g,k){return d(new b(function(b,d){if("string"===typeof g){var u=g;g=k||{};null==g.url&&(g.url=u)}null==g.method&&(g.method="GET");g.method=g.method.toUpperCase();u="boolean"===typeof g.useBody?g.useBody:"GET"!==g.method&&"TRACE"!==g.method;"function"!==
typeof g.serialize&&(g.serialize="undefined"!==typeof FormData&&g.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==typeof g.deserialize&&(g.deserialize=v);"function"!==typeof g.extract&&(g.extract=p);g.url=l(g.url,g.data);u?g.data=g.serialize(g.data):g.url=h(g.url,g.data);var n=new a.XMLHttpRequest;n.open(g.method,g.url,"boolean"===typeof g.async?g.async:!0,"string"===typeof g.user?g.user:void 0,"string"===typeof g.password?g.password:void 0);g.serialize===JSON.stringify&&
u&&n.setRequestHeader("Content-Type","application/json; charset=utf-8");g.deserialize===v&&n.setRequestHeader("Accept","application/json, text/*");g.withCredentials&&(n.withCredentials=g.withCredentials);"function"===typeof g.config&&(n=g.config(n,g)||n);n.onreadystatechange=function(){if(4===n.readyState)try{var a=g.extract!==p?g.extract(n,g):g.deserialize(g.extract(n,g));if(200<=n.status&&300>n.status||304===n.status)b(r(g.type,a));else{var h=Error(n.responseText),k;for(k in a)h[k]=a[k];d(h)}}catch(G){d(G)}};
u&&null!=g.data?n.send(g.data):n.send()}))},jsonp:function(g){return d(new b(function(b,d){var n=g.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+m++,k=a.document.createElement("script");a[n]=function(d){k.parentNode.removeChild(k);b(r(g.type,d));delete a[n]};k.onerror=function(){k.parentNode.removeChild(k);d(Error("JSONP request failed"));delete a[n]};null==g.data&&(g.data={});g.url=l(g.url,g.data);g.data[g.callbackKey||"callback"]=n;k.src=h(g.url,g.data);a.document.documentElement.appendChild(k)}))},
setCompletionCallback:function(a){q=a}}}(window,"undefined"!==typeof Promise?Promise:y),J=function(){var a=[];return{subscribe:a.push.bind(a),unsubscribe:function(b){b=a.indexOf(b);-1<b&&a.splice(b,1)},publish:function(){for(var b=0;b<a.length;b++)a[b].apply(this,arguments)}}}();I.setCompletionCallback(J.publish);var N=function(a){function b(c,f,a,b,d,g,h){for(;a<b;a++){var e=f[a];null!=e&&r(c,k(e,d,h),g)}}function k(c,f,a){var e=c.tag;null!=c.attrs&&t(c.attrs,c,f);if("string"===typeof e)switch(e){case "#":return c.dom=
z.createTextNode(c.children);case "<":return d(c);case "[":var g=z.createDocumentFragment();null!=c.children&&(e=c.children,b(g,e,0,e.length,f,null,a));c.dom=g.firstChild;c.domSize=g.childNodes.length;return g;default:var h=c.tag;switch(c.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}var E=(e=c.attrs)&&e.is,h=a?E?z.createElementNS(a,h,{is:E}):z.createElementNS(a,h):E?z.createElement(h,{is:E}):z.createElement(h);c.dom=h;if(null!=e)for(g in E=
a,e)n(c,g,null,e[g],E);null!=c.attrs&&null!=c.attrs.contenteditable?y(c):(null!=c.text&&(""!==c.text?h.textContent=c.text:c.children=[m("#",void 0,void 0,c.text,void 0,void 0)]),null!=c.children&&(g=c.children,b(h,g,0,g.length,f,null,a),f=c.attrs,"select"===c.tag&&null!=f&&("value"in f&&n(c,"value",null,f.value,void 0),"selectedIndex"in f&&n(c,"selectedIndex",null,f.selectedIndex,void 0))));return h}else{c.state||(c.state={});P(c.state,c.tag);g=c.tag.view;if(null!=g.reentrantLock)c=G;else if(g.reentrantLock=
!0,t(c.tag,c,f),c.instance=m.normalize(g.call(c.state,c)),g.reentrantLock=null,null!=c.instance){if(c.instance===c)throw Error("A view cannot return the vnode it received as arguments");f=k(c.instance,f,a);c.dom=c.instance.dom;c.domSize=null!=c.dom?c.instance.domSize:0;c=f}else c.domSize=0,c=G;return c}}function d(c){var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(c.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",f=z.createElement(f);
f.innerHTML=c.children;c.dom=f.firstChild;c.domSize=f.childNodes.length;c=z.createDocumentFragment();for(var a;a=f.firstChild;)c.appendChild(a);return c}function l(c,a,e,g,d,n){if(a!==e&&(null!=a||null!=e))if(null==a)b(c,e,0,e.length,g,d,void 0);else if(null==e)u(a,0,a.length,e);else if(a.length===e.length&&null!=e[0]&&null==e[0].key)for(var f=0;f<a.length;f++)a[f]===e[f]||null==a[f]&&null==e[f]||(null==a[f]?r(c,k(e[f],g,n),p(a,f+1,d)):null==e[f]?u(a,f,f+1,e):h(c,a[f],e[f],g,p(a,f+1,d),!1,n));else{a:{if(null!=
a.pool&&Math.abs(a.pool.length-e.length)<=Math.abs(a.length-e.length)&&(f=e[0]&&e[0].children&&e[0].children.length||0,Math.abs((a.pool[0]&&a.pool[0].children&&a.pool[0].children.length||0)-f)<=Math.abs((a[0]&&a[0].children&&a[0].children.length||0)-f))){f=!0;break a}f=!1}f&&(a=a.concat(a.pool));for(var A=0,l=0,q=a.length-1,B=e.length-1,w;q>=A&&B>=l;){var x=a[A],m=e[l];if(x!==m||f)if(null==x)A++;else if(null==m)l++;else if(x.key===m.key)A++,l++,h(c,x,m,g,p(a,A,d),f,n),f&&x.tag===m.tag&&r(c,v(x),d);
else if(x=a[q],x!==m||f)if(null==x)q--;else if(null==m)l++;else if(x.key===m.key)h(c,x,m,g,p(a,q+1,d),f,n),(f||l<B)&&r(c,v(x),p(a,A,d)),q--,l++;else break;else q--,l++;else A++,l++}for(;q>=A&&B>=l;){x=a[q];m=e[B];if(x!==m||f)if(null==x)q--;else{if(null!=m)if(x.key===m.key)h(c,x,m,g,p(a,q+1,d),f,n),f&&x.tag===m.tag&&r(c,v(x),d),null!=x.dom&&(d=x.dom),q--;else{if(!w){w=a;var x=q,D={},z;for(z=0;z<x;z++){var t=w[z];null!=t&&(t=t.key,null!=t&&(D[t]=z))}w=D}null!=m&&(x=w[m.key],null!=x?(D=a[x],h(c,D,m,
g,p(a,q+1,d),f,n),r(c,v(D),d),a[x].skip=!0,null!=D.dom&&(d=D.dom)):(m=k(m,g,void 0),r(c,m,d),d=m))}B--}else q--,B--;if(B<l)break}b(c,e,l,B+1,g,d,n);u(a,A,q+1,e)}}function h(a,f,e,b,u,q,w){var c=f.tag;if(c===e.tag){e.state=f.state;e.events=f.events;var A;var B;null!=e.attrs&&"function"===typeof e.attrs.onbeforeupdate&&(A=e.attrs.onbeforeupdate.call(e.state,e,f));"string"!==typeof e.tag&&"function"===typeof e.tag.onbeforeupdate&&(B=e.tag.onbeforeupdate.call(e.state,e,f));void 0===A&&void 0===B||A||
B?A=!1:(e.dom=f.dom,e.domSize=f.domSize,e.instance=f.instance,A=!0);if(!A)if(null!=e.attrs&&M(e.attrs,e,b,q),"string"===typeof c)switch(c){case "#":f.children.toString()!==e.children.toString()&&(f.dom.nodeValue=e.children);e.dom=f.dom;break;case "<":f.children!==e.children?(v(f),r(a,d(e),u)):(e.dom=f.dom,e.domSize=f.domSize);break;case "[":l(a,f.children,e.children,b,u,w);f=0;b=e.children;e.dom=null;if(null!=b){for(var p=0;p<b.length;p++)a=b[p],null!=a&&null!=a.dom&&(null==e.dom&&(e.dom=a.dom),f+=
a.domSize||1);1!==f&&(e.domSize=f)}break;default:a=w;u=e.dom=f.dom;switch(e.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text,e.text=void 0));q=f.attrs;w=e.attrs;c=a;if(null!=w)for(p in w)n(e,p,q&&q[p],w[p],c);if(null!=q)for(p in q)null!=w&&p in w||("className"===p&&(p="class"),"o"!==p[0]||"n"!==p[1]||L(p)?"key"!==p&&e.dom.removeAttribute(p):F(e,p,void 0));null!=
e.attrs&&null!=e.attrs.contenteditable?y(e):null!=f.text&&null!=e.text&&""!==e.text?f.text.toString()!==e.text.toString()&&(f.dom.firstChild.nodeValue=e.text):(null!=f.text&&(f.children=[m("#",void 0,void 0,f.text,void 0,f.dom.firstChild)]),null!=e.text&&(e.children=[m("#",void 0,void 0,e.text,void 0,void 0)]),l(u,f.children,e.children,b,null,a))}else e.instance=m.normalize(e.tag.view.call(e.state,e)),M(e.tag,e,b,q),null!=e.instance?(null==f.instance?r(a,k(e.instance,b,w),u):h(a,f.instance,e.instance,
b,u,q,w),e.dom=e.instance.dom,e.domSize=e.instance.domSize):null!=f.instance?(g(f.instance,null),e.dom=void 0,e.domSize=0):(e.dom=f.dom,e.domSize=f.domSize)}else g(f,null),r(a,k(e,b,w),u)}function v(a){var c=a.domSize;if(null!=c||null==a.dom){var e=z.createDocumentFragment();if(0<c){for(a=a.dom;--c;)e.appendChild(a.nextSibling);e.insertBefore(a,e.firstChild)}return e}return a.dom}function p(a,f,e){for(;f<a.length;f++)if(null!=a[f]&&null!=a[f].dom)return a[f].dom;return e}function r(a,f,e){e&&e.parentNode?
a.insertBefore(f,e):a.appendChild(f)}function y(a){var c=a.children;if(null!=c&&1===c.length&&"<"===c[0].tag)c=c[0].children,a.dom.innerHTML!==c&&(a.dom.innerHTML=c);else if(null!=a.text||null!=c&&0!==c.length)throw Error("Child node of a contenteditable must be trusted");}function u(a,f,e,b){for(;f<e;f++){var c=a[f];null!=c&&(c.skip?c.skip=!1:g(c,b))}}function q(a){var c=!1;return function(){c||(c=!0,a())}}function g(a,f){function c(){if(++d===b&&(w(a),a.dom)){var c=a.domSize||1;if(1<c)for(var e=
a.dom;--c;){var g=e.nextSibling,h=g.parentNode;null!=h&&h.removeChild(g)}c=a.dom;e=c.parentNode;null!=e&&e.removeChild(c);if(c=null!=f&&null==a.domSize)c=a.attrs,c=!(null!=c&&(c.oncreate||c.onupdate||c.onbeforeremove||c.onremove));c&&"string"===typeof a.tag&&(f.pool?f.pool.push(a):f.pool=[a])}}var b=1,d=0;a.attrs&&a.attrs.onbeforeremove&&(b++,a.attrs.onbeforeremove.call(a.state,a,q(c)));"string"!==typeof a.tag&&a.tag.onbeforeremove&&(b++,a.tag.onbeforeremove.call(a.state,a,q(c)));c()}function w(a){a.attrs&&
a.attrs.onremove&&a.attrs.onremove.call(a.state,a);"string"!==typeof a.tag&&a.tag.onremove&&a.tag.onremove.call(a.state,a);if(null!=a.instance)w(a.instance);else if(a=a.children,Array.isArray(a))for(var c=0;c<a.length;c++){var e=a[c];null!=e&&w(e)}}function n(a,f,e,b,d){var c=a.dom;if("key"!==f&&(e!==b||"value"===f||"checked"===f||"selectedIndex"===f||"selected"===f&&a.dom===z.activeElement||"object"===typeof b)&&"undefined"!==typeof b&&!L(f)){var g=f.indexOf(":");if(-1<g&&"xlink"===f.substr(0,g))c.setAttributeNS("http://www.w3.org/1999/xlink",
f.slice(g+1),b);else if("o"===f[0]&&"n"===f[1]&&"function"===typeof b)F(a,f,b);else if("style"===f)if(a=e,a===b&&(c.style.cssText="",a=null),null==b)c.style.cssText="";else if("string"===typeof b)c.style.cssText=b;else{"string"===typeof a&&(c.style.cssText="");for(var h in b)c.style[h]=b[h];if(null!=a&&"string"!==typeof a)for(h in a)h in b||(c.style[h]="")}else f in c&&"href"!==f&&"list"!==f&&"form"!==f&&"width"!==f&&"height"!==f&&void 0===d?"input"===a.tag&&"value"===f&&a.dom.value===b&&a.dom===
z.activeElement||"select"===a.tag&&"value"===f&&a.dom.value===b&&a.dom===z.activeElement||"option"===a.tag&&"value"===f&&a.dom.value===b||(c[f]=b):"boolean"===typeof b?b?c.setAttribute(f,""):c.removeAttribute(f):c.setAttribute("className"===f?"class":f,b)}}function L(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function F(a,b,e){var c=a.dom,f=function(a){var b=e.call(c,a);"function"===typeof C&&C.call(c,a);return b};if(b in c)c[b]=
"function"===typeof e?f:null;else{var d=b.slice(2);void 0===a.events&&(a.events={});null!=a.events[b]&&c.removeEventListener(d,a.events[b],!1);"function"===typeof e&&(a.events[b]=f,c.addEventListener(d,a.events[b],!1))}}function t(a,b,e){"function"===typeof a.oninit&&a.oninit.call(b.state,b);"function"===typeof a.oncreate&&e.push(a.oncreate.bind(b.state,b))}function M(a,b,e,d){d?t(a,b,e):"function"===typeof a.onupdate&&e.push(a.onupdate.bind(b.state,b))}function P(a,b){Object.keys(b).forEach(function(c){a[c]=
b[c]})}var z=a.document,G=z.createDocumentFragment(),C;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],f=z.activeElement;null==a.vnodes&&(a.textContent="");Array.isArray(b)||(b=[b]);l(a,a.vnodes,m.normalizeChildren(b),c,null,void 0);a.vnodes=b;for(var d=0;d<c.length;d++)c[d]();z.activeElement!==f&&f.focus()},setEventCallback:function(a){return C=a}}}(window),Q=function(a){var b=0,k=null,d="function"===typeof requestAnimationFrame?
requestAnimationFrame:setTimeout;return function(l){var h=Date.now();!0===l||0===b||16<=h-b?(b=h,a()):null===k&&(k=d(function(){k=null;a();b=Date.now()},16-(h-b)))}},R=function(a,b,k,d){d=Q(d);null!=b&&b.setEventCallback(function(a){!1!==a.redraw&&k.publish()});null!=k&&(a.redraw&&k.unsubscribe(a.redraw),k.subscribe(d));return a.redraw=d};t.mount=function(a,b){return function(k,d){if(null===d)a.render(k,[]),b.unsubscribe(k.redraw),delete k.redraw;else{if(null==d.view)throw Error("m.mount(element, component) expects a component, not a vnode");
R(k,a,b,function(){a.render(k,m(d,void 0,void 0,void 0,void 0,void 0))})()}}}(N,J);var K=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var b={},k={},d=0;d<a.length;d++){var l=a[d].split("="),h=decodeURIComponent(l[0]),l=2===l.length?decodeURIComponent(l[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var m=h.split(/\]\[?|\[/),p=b;-1<h.indexOf("[")&&m.pop();for(var r=0;r<m.length;r++){var h=m[r],t=m[r+1],t=""==t||!isNaN(parseInt(t,10)),u=r===m.length-1;""===
h&&(h=m.slice(0,r).join(),null==k[h]&&(k[h]=0),h=k[h]++);null==p[h]&&(p[h]=u?l:t?[]:{});p=p[h]}}return b},S=function(a){function b(b){var d=a.location[b].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===b&&"/"!==d[0]&&(d="/"+d);return d}function k(a){return function(){null==t&&(t=p(function(){t=null;a()}))}}function d(a,b,d){var g=a.indexOf("?"),h=a.indexOf("#"),k=-1<g?g:-1<h?h:a.length;if(-1<g){var g=K(a.slice(g+1,-1<h?h:a.length)),l;for(l in g)b[l]=g[l]}if(-1<h)for(l in b=K(a.slice(h+
1)),b)d[l]=b[l];return a.slice(0,k)}function l(){switch(r.charAt(0)){case "#":return b("hash").slice(r.length);case "?":return b("search").slice(r.length)+b("hash");default:return b("pathname").slice(r.length)+b("search")+b("hash")}}function h(b,h,g){var k={},n={};b=d(b,k,n);if(null!=h){for(var l in h)k[l]=h[l];b=b.replace(/:([^\/]+)/g,function(a,b){delete k[b];return h[b]})}(l=C(k))&&(b+="?"+l);(n=C(n))&&(b+="#"+n);m?(g&&g.replace?a.history.replaceState(null,null,r+b):a.history.pushState(null,null,
r+b),a.onpopstate()):a.location.href=r+b}var m="function"===typeof a.history.pushState,p="function"===typeof setImmediate?setImmediate:setTimeout,r="#!",t;return{setPrefix:function(a){r=a},getPath:l,setPath:h,defineRoutes:function(b,h,g){function q(){var a=l(),k={},m=d(a,k,k),q;for(q in b){var p=new RegExp("^"+q.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(p.test(m)){m.replace(p,function(){for(var d=q.match(/:[^\/]+/g)||[],g=[].slice.call(arguments,1,-2),l=0;l<d.length;l++)k[d[l].replace(/:|\./g,
"")]=decodeURIComponent(g[l]);h(b[q],k,a,q)});return}}g(a,k)}m?a.onpopstate=k(q):"#"===r.charAt(0)&&(a.onhashchange=q);q();return q},link:function(a){a.dom.setAttribute("href",r+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=!1,a=this.getAttribute("href"),0===a.indexOf(r)&&(a=a.slice(r.length)),h(a,void 0,void 0))}}}};t.route=function(a,b){function k(a){return a}var d=S(a),l,h,t,p,r,y={view:function(){return[t(m(h,null,p,void 0,
void 0,void 0))]}},u=function(a,g,m){h="div";t=k;p=null;b(a,y);d.defineRoutes(m,function(b,d,g){var m="function"!==typeof b.view,n=k,q=l=function(k){q===l&&(l=null,h=null!=k?k:m?"div":b,t=n,p=d,r=g,a.redraw(!0))},u=function(){q()};m&&("function"===typeof b.render&&(n=b.render.bind(b)),"function"===typeof b.onmatch&&(u=b.onmatch));u.call(b,q,d,g)},function(){d.setPath(g,null,{replace:!0})})};u.link=d.link;u.prefix=d.setPrefix;u.set=d.setPath;u.get=function(){return r};return u}(window,t.mount);t.withAttr=
function(a,b,k){return function(d){return b.call(k||this,a in d.currentTarget?d.currentTarget[a]:d.currentTarget.getAttribute(a))}};t.render=N.render;t.redraw=J.publish;t.request=I.request;t.jsonp=I.jsonp;t.parseQueryString=K;t.buildQueryString=C;t.version="1.0.0-rc.5";"undefined"!==typeof module?module.exports=t:window.m=t};