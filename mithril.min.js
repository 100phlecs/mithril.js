new function(){function x(b,f,n,h,k,l){return{tag:b,key:f,attrs:n,children:h,text:k,dom:l,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function z(b){if(null==b||"string"!==typeof b&&null==b.view)throw Error("The selector must be either a string or a component.");if("string"===typeof b&&void 0===F[b]){for(var f,n,h=[],k={};f=P.exec(b);){var l=f[1],m=f[2];""===l&&""!==m?n=m:"#"===l?k.id=m:"."===l?h.push(m):"["===f[3][0]&&((l=f[6])&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
k[f[4]]=l||!0)}0<h.length&&(k.className=h.join(" "));F[b]=function(b,d){var f=!1,l,h,m=b.className||b["class"],r;for(r in k)b[r]=k[r];void 0!==m&&(void 0!==b["class"]&&(b["class"]=void 0,b.className=m),void 0!==k.className&&(b.className=k.className+" "+m));for(r in b)if("key"!==r){f=!0;break}d instanceof Array&&1==d.length&&null!=d[0]&&"#"===d[0].tag?h=d[0].children:l=d;return x(n||"div",b.key,f?b:void 0,l,h,void 0)}}var w;null!=arguments[1]&&("object"!==typeof arguments[1]||void 0!==arguments[1].tag||
arguments[1]instanceof Array)?h=1:(w=arguments[1],h=2);if(arguments.length===h+1)f=arguments[h]instanceof Array?arguments[h]:[arguments[h]];else for(f=[];h<arguments.length;h++)f.push(arguments[h]);return"string"===typeof b?F[b](w||{},x.normalizeChildren(f)):x(b,w&&w.key,w||{},x.normalizeChildren(f),void 0,void 0)}x.normalize=function(b){return b instanceof Array?x("[",void 0,void 0,x.normalizeChildren(b),void 0,void 0):null!=b&&"object"!==typeof b?x("#",void 0,void 0,b,void 0,void 0):b};x.normalizeChildren=
function(b){for(var f=0;f<b.length;f++)b[f]=x.normalize(b[f]);return b};var P=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,F={};z.trust=function(b){return x("<",void 0,void 0,b,void 0,void 0)};z.fragment=function(b,f){return x("[",b.key,b,x.normalizeChildren(f),void 0,void 0)};var N=function(b){function f(c,a,e,d,b,f,p){for(;e<d;e++){var v=a[e];null!=v&&q(c,n(v,b,p),f)}}function n(c,a,e){var d=c.tag;null!=c.attrs&&D(c.attrs,c,a);if("string"===typeof d)switch(d){case "#":return c.dom=
y.createTextNode(c.children);case "<":return h(c);case "[":var b=y.createDocumentFragment();null!=c.children&&(d=c.children,f(b,d,0,d.length,a,null,e));c.dom=b.firstChild;c.domSize=b.childNodes.length;return b;default:var g=c.tag;switch(c.tag){case "svg":e="http://www.w3.org/2000/svg";break;case "math":e="http://www.w3.org/1998/Math/MathML"}var p=(d=c.attrs)&&d.is,g=e?p?y.createElementNS(e,g,{is:p}):y.createElementNS(e,g):p?y.createElement(g,{is:p}):y.createElement(g);c.dom=g;if(null!=d)for(b in p=
e,d)u(c,b,null,d[b],p);null!=c.text&&(""!==c.text?g.textContent=c.text:c.children=[x("#",void 0,void 0,c.text,void 0,void 0)]);null!=c.children&&(b=c.children,f(g,b,0,b.length,a,null,e),a=c.attrs,"select"===c.tag&&null!=a&&("value"in a&&u(c,"value",null,a.value,void 0),"selectedIndex"in a&&u(c,"selectedIndex",null,a.selectedIndex,void 0)));return g}else{c.state||(c.state={});Q(c.state,c.tag);D(c.tag,c,a);c.instance=x.normalize(c.tag.view.call(c.state,c));if(null!=c.instance){if(c.instance===c)throw Error("A view cannot return the vnode it received as arguments");
a=n(c.instance,a,e);c.dom=c.instance.dom;c.domSize=null!=c.dom?c.instance.domSize:0;c=a}else c.domSize=0,c=J;return c}}function h(c){var a={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(c.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",a=y.createElement(a);a.innerHTML=c.children;c.dom=a.firstChild;c.domSize=a.childNodes.length;c=y.createDocumentFragment();for(var e;e=a.firstChild;)c.appendChild(e);return c}function k(c,a,e,b,
g,h){if(a!==e&&(null!=a||null!=e))if(null==a)f(c,e,0,e.length,b,g,void 0);else if(null==e)d(c,a,0,a.length,e);else{var p;a:{if(null!=a.pool&&Math.abs(a.pool.length-e.length)<=Math.abs(a.length-e.length)&&(p=e[0]&&e[0].children&&e[0].children.length||0,Math.abs((a.pool[0]&&a.pool[0].children&&a.pool[0].children.length||0)-p)<=Math.abs((a[0]&&a[0].children&&a[0].children.length||0)-p))){p=!0;break a}p=!1}p&&(a=a.concat(a.pool));if(a.length===e.length&&null!=e[0]&&null==e[0].key)for(var v=0;v<a.length;v++)a[v]===
e[v]||null==a[v]&&null==e[v]||(null==a[v]?q(c,n(e[v],b,h),w(a,v+1,g)):null==e[v]?d(c,a,v,v+1,e):l(c,a[v],e[v],b,w(a,v+1,g),p,h),p&&a[v].tag===e[v].tag&&q(c,m(a[v]),w(a,v+1,g)));else{for(var E=v=0,k=a.length-1,A=e.length-1,t;k>=v&&A>=E;){var r=a[v],u=e[E];if(r===u)v++,E++;else if(null!=r&&null!=u&&r.key===u.key)v++,E++,l(c,r,u,b,w(a,v,g),p,h),p&&r.tag===u.tag&&q(c,m(r),g);else if(r=a[k],r===u)k--,E++;else if(null!=r&&null!=u&&r.key===u.key)l(c,r,u,b,w(a,k+1,g),p,h),E<A&&q(c,m(r),w(a,v,g)),k--,E++;
else break}for(;k>=v&&A>=E;){r=a[k];u=e[A];if(r===u)k--;else if(null!=r&&null!=u&&r.key===u.key)l(c,r,u,b,w(a,k+1,g),p,h),p&&r.tag===u.tag&&q(c,m(r),g),null!=r.dom&&(g=r.dom),k--;else{if(!t){t=a;var r=k,C={},y;for(y=0;y<r;y++){var D=t[y];null!=D&&(D=D.key,null!=D&&(C[D]=y))}t=C}null!=u&&(r=t[u.key],null!=r?(C=a[r],l(c,C,u,b,w(a,k+1,g),p,h),q(c,m(C),g),a[r].skip=!0,null!=C.dom&&(g=C.dom)):(u=n(u,b,void 0),q(c,u,g),g=u))}A--;if(A<E)break}f(c,e,E,A+1,b,g,h);d(c,a,v,k+1,e)}}}function l(c,a,e,b,d,g,p){var v=
a.tag;if(v===e.tag){e.state=a.state;e.events=a.events;var f;var t;null!=e.attrs&&"function"===typeof e.attrs.onbeforeupdate&&(f=e.attrs.onbeforeupdate.call(e.state,e,a));"string"!==typeof e.tag&&"function"===typeof e.tag.onbeforeupdate&&(t=e.tag.onbeforeupdate.call(e.state,e,a));void 0===f&&void 0===t||f||t?f=!1:(e.dom=a.dom,e.domSize=a.domSize,e.instance=a.instance,f=!0);if(!f)if(null!=e.attrs&&z(e.attrs,e,b,g),"string"===typeof v)switch(v){case "#":a.children.toString()!==e.children.toString()&&
(a.dom.nodeValue=e.children);e.dom=a.dom;break;case "<":a.children!==e.children?(m(a),q(c,h(e),d)):(e.dom=a.dom,e.domSize=a.domSize);break;case "[":k(c,a.children,e.children,b,d,p);a=0;b=e.children;e.dom=null;if(null!=b){for(var B=0;B<b.length;B++)c=b[B],null!=c&&null!=c.dom&&(null==e.dom&&(e.dom=c.dom),a+=c.domSize||1);1!==a&&(e.domSize=a)}break;default:c=p;d=e.dom=a.dom;switch(e.tag){case "svg":c="http://www.w3.org/2000/svg";break;case "math":c="http://www.w3.org/1998/Math/MathML"}"textarea"===
e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text));g=a.attrs;p=e.attrs;v=c;if(null!=p)for(B in p)u(e,B,g&&g[B],p[B],v);if(null!=g)for(B in g)null!=p&&B in p||("className"===B&&(B="class"),"o"!==B[0]||"n"!==B[1]||r(B)?"key"!==B&&e.dom.removeAttribute(B):C(e,B,void 0));null!=a.text&&null!=e.text&&""!==e.text?a.text.toString()!==e.text.toString()&&(a.dom.firstChild.nodeValue=e.text):(null!=a.text&&(a.children=[x("#",void 0,void 0,a.text,void 0,a.dom.firstChild)]),null!=e.text&&
(e.children=[x("#",void 0,void 0,e.text,void 0,void 0)]),k(d,a.children,e.children,b,null,c))}else e.instance=x.normalize(e.tag.view.call(e.state,e)),z(e.tag,e,b,g),null!=e.instance?(null==a.instance?q(c,n(e.instance,b,p),d):l(c,a.instance,e.instance,b,d,g,p),e.dom=e.instance.dom,e.domSize=e.instance.domSize):null!=a.instance?(A(c,a.instance,null),e.dom=void 0,e.domSize=0):(e.dom=a.dom,e.domSize=a.domSize)}else A(c,a,null),q(c,n(e,b,void 0),d)}function m(c){var a=c.domSize;if(null!=a||null==c.dom){var e=
y.createDocumentFragment();if(0<a){for(c=c.dom;--a;)e.appendChild(c.nextSibling);e.insertBefore(c,e.firstChild)}return e}return c.dom}function w(c,a,e){for(;a<c.length;a++)if(null!=c[a]&&null!=c[a].dom)return c[a].dom;return e}function q(c,a,e){e&&e.parentNode?c.insertBefore(a,e):c.appendChild(a)}function d(c,a,e,b,d){for(;e<b;e++){var g=a[e];null!=g&&(g.skip?g.skip=!1:A(c,g,d))}}function g(c){var a=!1;return function(){a||(a=!0,c())}}function A(c,a,e){function b(){if(++f===d&&(t(a),a.dom)){var p=
a.domSize||1;if(1<p)for(var g=a.dom;--p;)c.removeChild(g.nextSibling);null!=a.dom.parentNode&&c.removeChild(a.dom);if(p=null!=e&&null==a.domSize)p=a.attrs,p=!(null!=p&&(p.oncreate||p.onupdate||p.onbeforeremove||p.onremove));p&&"string"===typeof a.tag&&(e.pool?e.pool.push(a):e.pool=[a])}}var d=1,f=0;a.attrs&&a.attrs.onbeforeremove&&(d++,a.attrs.onbeforeremove.call(a.state,a,g(b)));"string"!==typeof a.tag&&a.tag.onbeforeremove&&(d++,a.tag.onbeforeremove.call(a.state,a,g(b)));b()}function t(c){c.attrs&&
c.attrs.onremove&&c.attrs.onremove.call(c.state,c);"string"!==typeof c.tag&&c.tag.onremove&&c.tag.onremove.call(c.state,c);if(null!=c.instance)t(c.instance);else if(c=c.children,c instanceof Array)for(var a=0;a<c.length;a++){var e=c[a];null!=e&&t(e)}}function u(c,a,e,b,d){var g=c.dom;if("key"!==a&&(e!==b||"value"===a||"checked"===a||"selectedIndex"===a||"selected"===a&&c.dom===y.activeElement||"object"===typeof b)&&"undefined"!==typeof b&&!r(a)){var p=a.indexOf(":");if(-1<p&&"xlink"===a.substr(0,
p))g.setAttributeNS("http://www.w3.org/1999/xlink",a.slice(p+1),b);else if("o"===a[0]&&"n"===a[1]&&"function"===typeof b)C(c,a,b);else if("style"===a)if(c=e,c===b&&(g.style.cssText="",c=null),null==b)g.style.cssText="";else if("string"===typeof b)g.style.cssText=b;else{"string"===typeof c&&(g.style.cssText="");for(var v in b)g.style[v]=b[v];if(null!=c&&"string"!==typeof c)for(v in c)v in b||(g.style[v]="")}else if(a in g&&"href"!==a&&"list"!==a&&"form"!==a&&void 0===d){if("input"!==c.tag||"value"!==
a||c.dom.value!==b||c.dom!==y.activeElement)g[a]=b}else"boolean"===typeof b?b?g.setAttribute(a,""):g.removeAttribute(a):g.setAttribute("className"===a?"class":a,b)}}function r(c){return"oninit"===c||"oncreate"===c||"onupdate"===c||"onremove"===c||"onbeforeremove"===c||"onbeforeupdate"===c}function C(c,a,b){var d=c.dom,g=function(a){var c=b.call(d,a);"function"===typeof I&&I.call(d,a);return c};if(a in d)d[a]=g;else{var f=a.slice(2);void 0===c.events&&(c.events={});null!=c.events[a]&&d.removeEventListener(f,
c.events[a],!1);"function"===typeof b&&(c.events[a]=g,d.addEventListener(f,c.events[a],!1))}}function D(c,a,b){"function"===typeof c.oninit&&c.oninit.call(a.state,a);"function"===typeof c.oncreate&&b.push(c.oncreate.bind(a.state,a))}function z(c,a,b,d){d?D(c,a,b):"function"===typeof c.onupdate&&b.push(c.onupdate.bind(a.state,a))}function Q(c,a){Object.keys(a).forEach(function(b){c[b]=a[b]})}var y=b.document,J=y.createDocumentFragment(),I;return{render:function(c,a){if(!c)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");
var b=[],d=y.activeElement;null==c.vnodes&&(c.textContent="");a instanceof Array||(a=[a]);k(c,c.vnodes,x.normalizeChildren(a),b,null,void 0);c.vnodes=a;for(var g=0;g<b.length;g++)b[g]();y.activeElement!==d&&d.focus()},setEventCallback:function(c){return I=c}}}(window),O=function(b){function f(){function a(){0<arguments.length&&arguments[0]!==G&&h(a,arguments[0],void 0);return a._state.value}n(a,arguments);0<arguments.length&&arguments[0]!==G&&h(a,arguments[0],void 0);return a}function n(a,c){a.constructor=
f;a._state={id:H++,value:void 0,error:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],errorStream:void 0,endStream:void 0};a.map=x;a.ap=z;a.of=f;a.valueOf=y;a.toJSON=J;a.toString=y;a.run=g;a["catch"]=A;Object.defineProperties(a,{error:{get:function(){if(!a._state.errorStream){var c=function(){0<arguments.length&&arguments[0]!==G&&h(a,void 0,arguments[0]);return a._state.error};n(c,[]);r(c,[a],F,F);a._state.errorStream=c}return a._state.errorStream}},end:{get:function(){if(!a._state.endStream){var c=
f();c.map(function(b){!0===b&&(D(a),D(c));return b});a._state.endStream=c}return a._state.endStream}}})}function h(a,c,b){k(a,c,b);for(var d in a._state.deps)m(a._state.deps[d],!1);a._state.changed=!1;for(var e in a._state.deps)a._state.deps[e]._state.changed=!1}function k(a,c,b){b=q(c,b);if(void 0!==b&&"function"===typeof a._state.recover){if(!w(a,l,!0))return}else l(a,c,b);a._state.changed=!0;2!==a._state.state&&(a._state.state=1)}function l(a,c,b){a._state.value=c;a._state.error=b}function m(a,
b){var d=a._state.parents;0<d.length&&d.filter(I).length===d.length&&(b||0<d.filter(c).length)&&(d=d.filter(e),0<d.length?k(a,void 0,d[0]._state.error):w(a,k,!1))}function w(a,c,b){try{var e=b?a._state.recover():a._state.derive();if(e===G)return!1;c(a,e,void 0)}catch(g){c(a,void 0,null!=g.__error?g.__error:g),null==g.__error&&d(a,g)}return!0}function q(a,c){null!=a&&a.constructor===f&&(c=void 0!==a._state.error?a._state.error:q(a._state.value,a._state.error));return c}function d(a,c){0===Object.keys(a._state.deps).length&&
setTimeout(function(){0===Object.keys(a._state.deps).length&&b(c)},0)}function g(a){var c=f(),b=this;return r(c,[b],function(){return u(c,a(b()))},void 0)}function A(a){var c=f(),b=this;return r(c,[b],function(){return b._state.value},function(){return u(c,a(b._state.error))})}function t(a,b){return r(f(),b,function(){var d=b.filter(e);if(0<d.length)throw{__error:d[0]._state.error};return a.apply(this,b.concat([b.filter(c)]))},void 0)}function u(a,c){if(null!=c&&c.constructor===f){var b=c,d=function(){k(a,
b._state.value,b._state.error);for(var c in a._state.deps)m(a._state.deps[c],!1)};b.map(d)["catch"](function(a){d();throw{__error:a};});if(0===b._state.state)return G;if(b._state.error)throw{__error:b._state.error};c=b._state.value}return c}function r(c,b,d,e){var g=c._state;g.derive=d;g.recover=e;g.parents=b.filter(a);C(c,g.parents);m(c,!0);return c}function C(a,c){for(var b=0;b<c.length;b++)c[b]._state.deps[a._state.id]=a,C(a,c[b]._state.parents)}function D(a){for(var c=0;c<a._state.parents.length;c++)delete a._state.parents[c]._state.deps[a._state.id];
for(var b in a._state.deps){var c=a._state.deps[b],d=c._state.parents.indexOf(a);-1<d&&c._state.parents.splice(d,1)}a._state.state=2;a._state.deps={}}function x(a){return t(function(c){return a(c())},[this])}function z(a){return t(function(a,c){return a()(c())},[this,a])}function y(){return this._state.value}function J(){return null!=this._state.value&&"function"===typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function I(a){return 1===a._state.state}function c(a){return a._state.changed}
function a(a){return 2!==a._state.state}function e(a){return a._state.error}var H=0,F=function(){},G={};f.merge=function(a){return t(function(){return a.map(function(a){return a()})},a)};f.combine=t;f.reject=function(a){var c=f();c.error(a);return c};f.HALT=G;return f}(console.log.bind(console)),H=function(b){function f(b,h){if(h instanceof Array)for(var m=0;m<h.length;m++)f(b+"["+m+"]",h[m]);else if("[object Object]"===Object.prototype.toString.call(h))for(m in h)f(b+"["+m+"]",h[m]);else n.push(encodeURIComponent(b)+
(null!=h&&""!==h?"="+encodeURIComponent(h):""))}if("[object Object]"!==Object.prototype.toString.call(b))return"";var n=[],h;for(h in b)f(h,b[h]);return n.join("&")},K=function(b,f){function n(b,g){if(null==g)return b;for(var f=b.match(/:[^\/]+/gi)||[],h=0;h<f.length;h++){var k=f[h].slice(1);null!=g[k]&&(b=b.replace(f[h],g[k]),delete g[k])}return b}function h(b,g){var f=H(g);if(""!==f){var h=0>b.indexOf("?")?"?":"&";b+=h+f}return b}function k(b){try{return""!==b?JSON.parse(b):null}catch(g){throw Error(b);
}}function l(b){return b.responseText}function m(b,g){if("function"===typeof b)if(g instanceof Array)for(var f=0;f<g.length;f++)g[f]=new b(g[f]);else return new b(g);return g}var w=0,q;return{request:function(d){var g=f();void 0!==d.initialValue&&g(d.initialValue);var A="boolean"===typeof d.useBody?d.useBody:"GET"!==d.method&&"TRACE"!==d.method;"function"!==typeof d.serialize&&(d.serialize="undefined"!==typeof FormData&&d.data instanceof FormData?function(b){return b}:JSON.stringify);"function"!==
typeof d.deserialize&&(d.deserialize=k);"function"!==typeof d.extract&&(d.extract=l);d.url=n(d.url,d.data);A?d.data=d.serialize(d.data):d.url=h(d.url,d.data);var t=new b.XMLHttpRequest;t.open(d.method,d.url,"boolean"===typeof d.async?d.async:!0,"string"===typeof d.user?d.user:void 0,"string"===typeof d.password?d.password:void 0);d.serialize===JSON.stringify&&A&&t.setRequestHeader("Content-Type","application/json; charset=utf-8");d.deserialize===k&&t.setRequestHeader("Accept","application/json, text/*");
"function"===typeof d.config&&(t=d.config(t,d)||t);t.onreadystatechange=function(){if(4===t.readyState){try{var b=d.extract!==l?d.extract(t,d):d.deserialize(d.extract(t,d));if(200<=t.status&&300>t.status)g(m(d.type,b));else{var f=Error(t.responseText),h;for(h in b)f[h]=b[h];g.error(f)}}catch(k){g.error(k)}"function"===typeof q&&q()}};A?t.send(d.data):t.send();return g},jsonp:function(d){var g=f();void 0!==d.initialValue&&g(d.initialValue);var k=d.callbackName||"_mithril_"+Math.round(1E16*Math.random())+
"_"+w++,t=b.document.createElement("script");b[k]=function(f){t.parentNode.removeChild(t);g(m(d.type,f));"function"===typeof q&&q();delete b[k]};t.onerror=function(){t.parentNode.removeChild(t);g.error(Error("JSONP request failed"));"function"===typeof q&&q();delete b[k]};null==d.data&&(d.data={});d.url=n(d.url,d.data);d.data[d.callbackKey||"callback"]=k;t.src=h(d.url,d.data);b.document.documentElement.appendChild(t);return g},setCompletionCallback:function(b){q=b}}}(window,O),L=function(){var b=
[];return{subscribe:b.push.bind(b),unsubscribe:function(f){f=b.indexOf(f);-1<f&&b.splice(f,1)},publish:function(){for(var f=0;f<b.length;f++)b[f].apply(this,arguments)}}}(),M=function(b){if(""===b||null==b)return{};"?"===b.charAt(0)&&(b=b.slice(1));b=b.split("&");for(var f={},n={},h=0;h<b.length;h++){var k=b[h].split("="),l=decodeURIComponent(k[0]),k=2===k.length?decodeURIComponent(k[1]):"",m=Number(k);""!==k&&!isNaN(m)||"NaN"===k?k=m:"true"===k?k=!0:"false"===k?k=!1:(m=new Date(k),isNaN(m.getTime())||
(k=m));var m=l.split(/\]\[?|\[/),w=f;-1<l.indexOf("[")&&m.pop();for(var q=0;q<m.length;q++){var l=m[q],d=m[q+1],d=""==d||!isNaN(parseInt(d,10)),g=q===m.length-1;""===l&&(l=m.slice(0,q).join(),null==n[l]&&(n[l]=0),l=n[l]++);null==w[l]&&(w[l]=g?k:d?[]:{});w=w[l]}}return f};K.setCompletionCallback(L.publish);var R=function(b){var f=0,n=null,h="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(k){var l=Date.now();!0===k||0===f||16<=l-f?(f=l,b()):null===n&&(n=h(function(){n=
null;b();f=Date.now()},16-(l-f)))}},S=function(b,f,n,h){h=R(h);null!=f&&f.setEventCallback(function(b){!1!==b.redraw&&n.publish()});null!=n&&(b.redraw&&n.unsubscribe(b.redraw),n.subscribe(h));return b.redraw=h};z.mount=function(b,f){return function(n,h){null===h?(b.render(n,[]),f.unsubscribe(n.redraw),delete n.redraw):S(n,b,f,function(){b.render(n,x(h,void 0,void 0,void 0,void 0,void 0))})()}}(N,L);var T=function(b){function f(g){var d=b.location[g].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);
"pathname"===g&&"/"!==d[0]&&(d="/"+d);return d}function n(b){return function(){null==d&&(d=w(function(){d=null;b()}))}}function h(b,d,f){var h=b.indexOf("?"),k=b.indexOf("#"),m=-1<h?h:-1<k?k:b.length;if(-1<h){var h=M(b.slice(h+1,-1<k?k:b.length)),l;for(l in h)d[l]=h[l]}if(-1<k)for(l in d=M(b.slice(k+1)),d)f[l]=d[l];return b.slice(0,m)}function k(){switch(q.charAt(0)){case "#":return f("hash").slice(q.length);case "?":return f("search").slice(q.length)+f("hash");default:return f("pathname").slice(q.length)+
f("search")+f("hash")}}function l(d,f,k){var l={},r={};d=h(d,l,r);if(null!=f){for(var n in f)l[n]=f[n];d=d.replace(/:([^\/]+)/g,function(b,d){delete l[d];return f[d]})}(n=H(l))&&(d+="?"+n);(r=H(r))&&(d+="#"+r);m?(k&&k.replace?b.history.replaceState(null,null,q+d):b.history.pushState(null,null,q+d),b.onpopstate()):b.location.href=q+d}var m="function"===typeof b.history.pushState,w="function"===typeof setImmediate?setImmediate:setTimeout,q="#!",d;return{setPrefix:function(b){q=b},getPath:k,setPath:l,
defineRoutes:function(d,f,l){function u(){var b=k(),m={},n=h(b,m,m),q;for(q in d){var u=new RegExp("^"+q.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(u.test(n)){n.replace(u,function(){for(var h=q.match(/:[^\/]+/g)||[],k=[].slice.call(arguments,1,-2),l=0;l<h.length;l++)m[h[l].replace(/:|\./g,"")]=decodeURIComponent(k[l]);f(d[q],m,b,q)});return}}l(b,m)}m?b.onpopstate=n(u):"#"===q.charAt(0)&&(b.onhashchange=u);u();return u},link:function(b){b.dom.setAttribute("href",q+
b.attrs.href);b.dom.onclick=function(d){d.preventDefault();d.redraw=!1;l(b.attrs.href,void 0,void 0)}}}};z.route=function(b,f){function n(b){return b}var h=T(b),k,l,m,w,q,d={view:function(){return m(x(l,null,w,void 0,void 0,void 0))}},g=function(b,g,u){l="div";m=n;w=null;f(b,d);h.defineRoutes(u,function(d,f,g){var h="function"!==typeof d.view,t=n,u=k=function(n){u===k&&(k=null,l=null!=n?n:h?"div":d,m=t,w=f,q=g,b.redraw(!0))},x=function(){u()};h&&("function"===typeof d.render&&(t=d.render.bind(d)),
"function"===typeof d.onmatch&&(x=d.onmatch));x.call(d,u,f,g)},function(){h.setPath(g,null,{replace:!0})})};g.link=h.link;g.prefix=h.setPrefix;g.set=h.setPath;g.get=function(){return q};return g}(window,z.mount);z.withAttr=function(b,f,n){return function(h){return f.call(n||this,b in h.currentTarget?h.currentTarget[b]:h.currentTarget.getAttribute(b))}};z.prop=O;z.render=N.render;z.redraw=L.publish;z.request=K.request;z.jsonp=K.jsonp;z.parseQueryString=M;z.buildQueryString=H;z.version="1.0.0";"undefined"!==
typeof module?module.exports=z:window.m=z};