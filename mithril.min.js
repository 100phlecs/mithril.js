new function(){function r(a,c,k,d,g,l){return{tag:a,key:c,attrs:k,children:d,text:g,dom:l,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function y(a){if(null==a||"string"!==typeof a&&null==a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a&&void 0===M[a]){for(var c,k,d=[],g={};c=R.exec(a);){var l=c[1],n=c[2];""===l&&""!==n?k=n:"#"===l?g.id=n:"."===l?d.push(n):"["===c[3][0]&&((l=c[6])&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
"class"===c[4]?d.push(l):g[c[4]]=l||!0)}0<d.length&&(g.className=d.join(" "));M[a]=function(a,c){var l=!1,b,d,u=a.className||a["class"],t;for(t in g)a[t]=g[t];void 0!==u&&(void 0!==a["class"]&&(a["class"]=void 0,a.className=u),void 0!==g.className&&(a.className=g.className+" "+u));for(t in a)if("key"!==t){l=!0;break}c instanceof Array&&1==c.length&&null!=c[0]&&"#"===c[0].tag?d=c[0].children:b=c;return r(k||"div",a.key,l?a:void 0,b,d,void 0)}}var A;null!=arguments[1]&&("object"!==typeof arguments[1]||
void 0!==arguments[1].tag||arguments[1]instanceof Array)?d=1:(A=arguments[1],d=2);if(arguments.length===d+1)c=arguments[d]instanceof Array?arguments[d]:[arguments[d]];else for(c=[];d<arguments.length;d++)c.push(arguments[d]);return"string"===typeof a?M[a](A||{},r.normalizeChildren(c)):r(a,A&&A.key,A||{},r.normalizeChildren(c),void 0,void 0)}function S(a){var c=0,k=null,d="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var g=Date.now();0===c||16<=g-c?(c=
g,a()):null===k&&(k=d(function(){k=null;a();c=Date.now()},16-(g-c)))}}r.normalize=function(a){return a instanceof Array?r("[",void 0,void 0,r.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?r("#",void 0,void 0,a,void 0,void 0):a};r.normalizeChildren=function(a){for(var c=0;c<a.length;c++)a[c]=r.normalize(a[c]);return a};var R=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,M={};y.trust=function(a){null==a&&(a="");return r("<",void 0,void 0,a,void 0,
void 0)};y.fragment=function(a,c){return r("[",a.key,a,r.normalizeChildren(c),void 0,void 0)};var w=function(a){function c(a,b){return function u(c){var h;try{if(!b||null==c||"object"!==typeof c&&"function"!==typeof c||"function"!==typeof(h=c.then))H(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",c);for(var d=0;d<a.length;d++)a[d](c);g.length=0;l.length=0;m.state=b;m.retry=function(){u(c)}});else{if(c===d)throw new TypeError("Promise can't be resolved w/ itself");
k(h.bind(c))}}catch(C){A(C)}}}function k(a){function b(b){return function(a){0<c++||b(a)}}var c=0,d=b(A);try{a(b(n),d)}catch(t){d(t)}}if(!(this instanceof w))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");var d=this,g=[],l=[],n=c(g,!0),A=c(l,!1),m=d._instance={resolvers:g,rejectors:l},H="function"===typeof setImmediate?setImmediate:setTimeout;k(a)};w.prototype.then=function(a,c){function k(a,c,k,h){c.push(function(b){if("function"!==
typeof a)k(b);else try{g(a(b))}catch(F){l&&l(F)}});"function"===typeof d.retry&&h===d.state&&d.retry()}var d=this._instance,g,l,n=new w(function(a,c){g=a;l=c});k(a,d.resolvers,g,!0);k(c,d.rejectors,l,!1);return n};w.prototype["catch"]=function(a){return this.then(null,a)};w.resolve=function(a){return a instanceof w?a:new w(function(c){c(a)})};w.reject=function(a){return new w(function(c,k){k(a)})};w.all=function(a){return new w(function(c,k){var d=a.length,g=0,l=[];if(0===a.length)c([]);else for(var n=
0;n<a.length;n++)(function(n){function m(a){g++;l[n]=a;g===d&&c(l)}null==a[n]||"object"!==typeof a[n]&&"function"!==typeof a[n]||"function"!==typeof a[n].then?m(a[n]):a[n].then(m,k)})(n)})};w.race=function(a){return new w(function(c,k){for(var d=0;d<a.length;d++)a[d].then(c,k)})};"undefined"===typeof I&&("undefined"!==typeof window?window.Promise=w:"undefined"!==typeof global&&(global.Promise=w));var J="undefined"!==typeof I?I:w,K=function(a){function c(a,d){if(d instanceof Array)for(var g=0;g<d.length;g++)c(a+
"["+g+"]",d[g]);else if("[object Object]"===Object.prototype.toString.call(d))for(g in d)c(a+"["+g+"]",d[g]);else k.push(encodeURIComponent(a)+(null!=d&&""!==d?"="+encodeURIComponent(d):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var k=[],d;for(d in a)c(d,a[d]);return k.join("&")},N=function(a,c){function k(){function b(){0===--a&&"function"===typeof h&&h()}var a=0;return function t(c){var d=c.then;c.then=function(){a++;var g=d.apply(c,arguments);g.then(b,function(a){b();
throw a;});return t(g)};return c}}function d(b,a){if("string"===typeof b){var c=b;b=a||{};null==b.url&&(b.url=c)}return b}function g(b,a){if(null==a)return b;for(var c=b.match(/:[^\/]+/gi)||[],d=0;d<c.length;d++){var g=c[d].slice(1);null!=a[g]&&(b=b.replace(c[d],a[g]),delete a[g])}return b}function l(a,c){var b=K(c);if(""!==b){var d=0>a.indexOf("?")?"?":"&";a+=d+b}return a}function n(a){try{return""!==a?JSON.parse(a):null}catch(F){throw Error(a);}}function A(a){return a.responseText}function m(a,
c){if("function"===typeof a)if(c instanceof Array)for(var b=0;b<c.length;b++)c[b]=new a(c[b]);else return new a(c);return c}var r=0,h;return{request:function(b,h){var u=k();b=d(b,h);var t=new c(function(c,d){null==b.method&&(b.method="GET");b.method=b.method.toUpperCase();var k="boolean"===typeof b.useBody?b.useBody:"GET"!==b.method&&"TRACE"!==b.method;"function"!==typeof b.serialize&&(b.serialize="undefined"!==typeof FormData&&b.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==
typeof b.deserialize&&(b.deserialize=n);"function"!==typeof b.extract&&(b.extract=A);b.url=g(b.url,b.data);k?b.data=b.serialize(b.data):b.url=l(b.url,b.data);var h=new a.XMLHttpRequest;h.open(b.method,b.url,"boolean"===typeof b.async?b.async:!0,"string"===typeof b.user?b.user:void 0,"string"===typeof b.password?b.password:void 0);b.serialize===JSON.stringify&&k&&h.setRequestHeader("Content-Type","application/json; charset=utf-8");b.deserialize===n&&h.setRequestHeader("Accept","application/json, text/*");
b.withCredentials&&(h.withCredentials=b.withCredentials);"function"===typeof b.config&&(h=b.config(h,b)||h);h.onreadystatechange=function(){if(4===h.readyState)try{var a=b.extract!==A?b.extract(h,b):b.deserialize(b.extract(h,b));if(200<=h.status&&300>h.status||304===h.status)c(m(b.type,a));else{var g=Error(h.responseText),k;for(k in a)g[k]=a[k];d(g)}}catch(G){d(G)}};k&&null!=b.data?h.send(b.data):h.send()});return!0===b.background?t:u(t)},jsonp:function(b,h){var n=k();b=d(b,h);var t=new c(function(c,
d){var h=b.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+r++,k=a.document.createElement("script");a[h]=function(d){k.parentNode.removeChild(k);c(m(b.type,d));delete a[h]};k.onerror=function(){k.parentNode.removeChild(k);d(Error("JSONP request failed"));delete a[h]};null==b.data&&(b.data={});b.url=g(b.url,b.data);b.data[b.callbackKey||"callback"]=h;k.src=l(b.url,b.data);a.document.documentElement.appendChild(k)});return!0===b.background?t:n(t)},setCompletionCallback:function(a){h=a}}}(window,
J),Q=function(a){function c(e,f,a,b,c,d,h){for(;a<b;a++){var q=f[a];null!=q&&m(e,k(q,c,h),d)}}function k(e,f,a){var q=e.tag;null!=e.attrs&&D(e.attrs,e,f);if("string"===typeof q)switch(q){case "#":return e.dom=B.createTextNode(e.children);case "<":return d(e);case "[":var b=B.createDocumentFragment();null!=e.children&&(q=e.children,c(b,q,0,q.length,f,null,a));e.dom=b.firstChild;e.domSize=b.childNodes.length;return b;default:var h=e.tag;switch(e.tag){case "svg":a="http://www.w3.org/2000/svg";break;
case "math":a="http://www.w3.org/1998/Math/MathML"}var g=(q=e.attrs)&&q.is,h=a?g?B.createElementNS(a,h,{is:g}):B.createElementNS(a,h):g?B.createElement(h,{is:g}):B.createElement(h);e.dom=h;if(null!=q)for(b in g=a,q)t(e,b,null,q[b],g);null!=e.attrs&&null!=e.attrs.contenteditable?H(e):(null!=e.text&&(""!==e.text?h.textContent=e.text:e.children=[r("#",void 0,void 0,e.text,void 0,void 0)]),null!=e.children&&(b=e.children,c(h,b,0,b.length,f,null,a),f=e.attrs,"select"===e.tag&&null!=f&&("value"in f&&t(e,
"value",null,f.value,void 0),"selectedIndex"in f&&t(e,"selectedIndex",null,f.selectedIndex,void 0))));return h}else{e.state||(e.state={});y(e.state,e.tag);b=e.tag.view;if(null!=b.reentrantLock)e=P;else if(b.reentrantLock=!0,D(e.tag,e,f),e.instance=r.normalize(b.call(e.state,e)),b.reentrantLock=null,null!=e.instance){if(e.instance===e)throw Error("A view cannot return the vnode it received as arguments");f=k(e.instance,f,a);e.dom=e.instance.dom;e.domSize=null!=e.dom?e.instance.domSize:0;e=f}else e.domSize=
0,e=P;return e}}function d(e){var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(e.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",f=B.createElement(f);f.innerHTML=e.children;e.dom=f.firstChild;e.domSize=f.childNodes.length;e=B.createDocumentFragment();for(var a;a=f.firstChild;)e.appendChild(a);return e}function g(e,f,a,b,d,g){if(f!==a&&(null!=f||null!=a))if(null==f)c(e,a,0,a.length,b,d,void 0);else if(null==a)h(f,0,f.length,
a);else{for(var q=!1,v=0;v<a.length;v++)if(null!=a[v]){q=null==a[v].key;break}if(f.length===a.length&&q)for(v=0;v<f.length;v++)f[v]!==a[v]&&(null==f[v]?m(e,k(a[v],b,g),A(f,v+1,d)):null==a[v]?h(f,v,v+1,a):l(e,f[v],a[v],b,A(f,v+1,d),!1,g));else{a:{if(null!=f.pool&&Math.abs(f.pool.length-a.length)<=Math.abs(f.length-a.length)&&(q=a[0]&&a[0].children&&a[0].children.length||0,Math.abs((f.pool[0]&&f.pool[0].children&&f.pool[0].children.length||0)-q)<=Math.abs((f[0]&&f[0].children&&f[0].children.length||
0)-q))){q=!0;break a}q=!1}q&&(f=f.concat(f.pool));for(var t=v=0,z=f.length-1,u=a.length-1,E;z>=v&&u>=t;){var x=f[v],p=a[t];if(x!==p||q)if(null==x)v++;else if(null==p)t++;else if(x.key===p.key)v++,t++,l(e,x,p,b,A(f,v,d),q,g),q&&x.tag===p.tag&&m(e,n(x),d);else if(x=f[z],x!==p||q)if(null==x)z--;else if(null==p)t++;else if(x.key===p.key)l(e,x,p,b,A(f,z+1,d),q,g),(q||t<u)&&m(e,n(x),A(f,v,d)),z--,t++;else break;else z--,t++;else v++,t++}for(;z>=v&&u>=t;){x=f[z];p=a[u];if(x!==p||q)if(null==x)z--;else{if(null!=
p)if(x.key===p.key)l(e,x,p,b,A(f,z+1,d),q,g),q&&x.tag===p.tag&&m(e,n(x),d),null!=x.dom&&(d=x.dom),z--;else{if(!E){E=f;var x=z,r={},C;for(C=0;C<x;C++){var D=E[C];null!=D&&(D=D.key,null!=D&&(r[D]=C))}E=r}null!=p&&(x=E[p.key],null!=x?(r=f[x],l(e,r,p,b,A(f,z+1,d),q,g),m(e,n(r),d),f[x].skip=!0,null!=r.dom&&(d=r.dom)):(p=k(p,b,void 0),m(e,p,d),d=p))}u--}else z--,u--;if(u<t)break}c(e,a,t,u+1,b,d,g);h(f,v,z+1,a)}}}function l(a,f,b,c,h,z,u){var e=f.tag;if(e===b.tag){b.state=f.state;b.events=f.events;var q;
var v;null!=b.attrs&&"function"===typeof b.attrs.onbeforeupdate&&(q=b.attrs.onbeforeupdate.call(b.state,b,f));"string"!==typeof b.tag&&"function"===typeof b.tag.onbeforeupdate&&(v=b.tag.onbeforeupdate.call(b.state,b,f));void 0===q&&void 0===v||q||v?q=!1:(b.dom=f.dom,b.domSize=f.domSize,b.instance=f.instance,q=!0);if(!q)if(null!=b.attrs&&w(b.attrs,b,c,z),"string"===typeof e)switch(e){case "#":f.children.toString()!==b.children.toString()&&(f.dom.nodeValue=b.children);b.dom=f.dom;break;case "<":f.children!==
b.children?(n(f),m(a,d(b),h)):(b.dom=f.dom,b.domSize=f.domSize);break;case "[":g(a,f.children,b.children,c,h,u);f=0;c=b.children;b.dom=null;if(null!=c){for(var p=0;p<c.length;p++)a=c[p],null!=a&&null!=a.dom&&(null==b.dom&&(b.dom=a.dom),f+=a.domSize||1);1!==f&&(b.domSize=f)}break;default:a=u;h=b.dom=f.dom;switch(b.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===b.tag&&(null==b.attrs&&(b.attrs={}),null!=b.text&&(b.attrs.value=b.text,
b.text=void 0));z=f.attrs;u=b.attrs;e=a;if(null!=u)for(p in u)t(b,p,z&&z[p],u[p],e);if(null!=z)for(p in z)null!=u&&p in u||("className"===p&&(p="class"),"o"!==p[0]||"n"!==p[1]||E(p)?"key"!==p&&b.dom.removeAttribute(p):C(b,p,void 0));null!=b.attrs&&null!=b.attrs.contenteditable?H(b):null!=f.text&&null!=b.text&&""!==b.text?f.text.toString()!==b.text.toString()&&(f.dom.firstChild.nodeValue=b.text):(null!=f.text&&(f.children=[r("#",void 0,void 0,f.text,void 0,f.dom.firstChild)]),null!=b.text&&(b.children=
[r("#",void 0,void 0,b.text,void 0,void 0)]),g(h,f.children,b.children,c,null,a))}else b.instance=r.normalize(b.tag.view.call(b.state,b)),w(b.tag,b,c,z),null!=b.instance?(null==f.instance?m(a,k(b.instance,c,u),h):l(a,f.instance,b.instance,c,h,z,u),b.dom=b.instance.dom,b.domSize=b.instance.domSize):null!=f.instance?(F(f.instance,null),b.dom=void 0,b.domSize=0):(b.dom=f.dom,b.domSize=f.domSize)}else F(f,null),m(a,k(b,c,u),h)}function n(b){var a=b.domSize;if(null!=a||null==b.dom){var e=B.createDocumentFragment();
if(0<a){for(b=b.dom;--a;)e.appendChild(b.nextSibling);e.insertBefore(b,e.firstChild)}return e}return b.dom}function A(b,a,c){for(;a<b.length;a++)if(null!=b[a]&&null!=b[a].dom)return b[a].dom;return c}function m(b,a,c){c&&c.parentNode?b.insertBefore(a,c):b.appendChild(a)}function H(b){var a=b.children;if(null!=a&&1===a.length&&"<"===a[0].tag)a=a[0].children,b.dom.innerHTML!==a&&(b.dom.innerHTML=a);else if(null!=b.text||null!=a&&0!==a.length)throw Error("Child node of a contenteditable must be trusted");
}function h(b,a,c,d){for(;a<c;a++){var e=b[a];null!=e&&(e.skip?e.skip=!1:F(e,d))}}function b(b){var a=!1;return function(){a||(a=!0,b())}}function F(a,f){function e(){if(++d===c&&(u(a),a.dom)){var b=a.domSize||1;if(1<b)for(var e=a.dom;--b;){var h=e.nextSibling,g=h.parentNode;null!=g&&g.removeChild(h)}b=a.dom;e=b.parentNode;null!=e&&e.removeChild(b);if(b=null!=f&&null==a.domSize)b=a.attrs,b=!(null!=b&&(b.oncreate||b.onupdate||b.onbeforeremove||b.onremove));b&&"string"===typeof a.tag&&(f.pool?f.pool.push(a):
f.pool=[a])}}var c=1,d=0;a.attrs&&a.attrs.onbeforeremove&&(c++,a.attrs.onbeforeremove.call(a.state,a,b(e)));"string"!==typeof a.tag&&a.tag.onbeforeremove&&(c++,a.tag.onbeforeremove.call(a.state,a,b(e)));e()}function u(b){b.attrs&&b.attrs.onremove&&b.attrs.onremove.call(b.state,b);"string"!==typeof b.tag&&b.tag.onremove&&b.tag.onremove.call(b.state,b);if(null!=b.instance)u(b.instance);else if(b=b.children,b instanceof Array)for(var a=0;a<b.length;a++){var e=b[a];null!=e&&u(e)}}function t(b,a,c,d,h){var e=
b.dom;if("key"!==a&&(c!==d||"value"===a||"checked"===a||"selectedIndex"===a||"selected"===a&&b.dom===B.activeElement||"object"===typeof d)&&"undefined"!==typeof d&&!E(a)){var f=a.indexOf(":");if(-1<f&&"xlink"===a.substr(0,f))e.setAttributeNS("http://www.w3.org/1999/xlink",a.slice(f+1),d);else if("o"===a[0]&&"n"===a[1]&&"function"===typeof d)C(b,a,d);else if("style"===a)if(b=c,b===d&&(e.style.cssText="",b=null),null==d)e.style.cssText="";else if("string"===typeof d)e.style.cssText=d;else{"string"===
typeof b&&(e.style.cssText="");for(var g in d)e.style[g]=d[g];if(null!=b&&"string"!==typeof b)for(g in b)g in d||(e.style[g]="")}else a in e&&"href"!==a&&"list"!==a&&"form"!==a&&"width"!==a&&"height"!==a&&void 0===h?"input"===b.tag&&"value"===a&&b.dom.value===d&&b.dom===B.activeElement||"select"===b.tag&&"value"===a&&b.dom.value===d&&b.dom===B.activeElement||"option"===b.tag&&"value"===a&&b.dom.value===d||(e[a]=d):"boolean"===typeof d?d?e.setAttribute(a,""):e.removeAttribute(a):e.setAttribute("className"===
a?"class":a,d)}}function E(b){return"oninit"===b||"oncreate"===b||"onupdate"===b||"onremove"===b||"onbeforeremove"===b||"onbeforeupdate"===b}function C(b,a,c){var d=b.dom,e="function"!==typeof G?c:function(b){var a=c.call(d,b);G.call(d,b);return a};if(a in d)d[a]="function"===typeof c?e:null;else{var f=a.slice(2);void 0===b.events&&(b.events={});b.events[a]!==e&&(null!=b.events[a]&&d.removeEventListener(f,b.events[a],!1),"function"===typeof c&&(b.events[a]=e,d.addEventListener(f,b.events[a],!1)))}}
function D(b,a,c){"function"===typeof b.oninit&&b.oninit.call(a.state,a);"function"===typeof b.oncreate&&c.push(b.oncreate.bind(a.state,a))}function w(b,a,c,d){d?D(b,a,c):"function"===typeof b.onupdate&&c.push(b.onupdate.bind(a.state,a))}function y(b,a){Object.keys(a).forEach(function(c){b[c]=a[c]})}var B=a.document,P=B.createDocumentFragment(),G;return{render:function(b,a){if(!b)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],d=B.activeElement;
null==b.vnodes&&(b.textContent="");a instanceof Array||(a=[a]);g(b,b.vnodes,r.normalizeChildren(a),c,null,void 0);b.vnodes=a;for(var e=0;e<c.length;e++)c[e]();B.activeElement!==d&&d.focus()},setEventCallback:function(b){return G=b}}},L=function(a){function c(a){a=d.indexOf(a);-1<a&&d.splice(a,2)}function k(){for(var a=1;a<d.length;a+=2)d[a]()}a=Q(a);a.setEventCallback(function(a){!1!==a.redraw&&k()});var d=[];return{subscribe:function(a,k){c(a);d.push(a,S(k))},unsubscribe:c,redraw:k,render:a.render}}(window);
N.setCompletionCallback(L.redraw);y.mount=function(a){return function(c,k){if(null===k)a.render(c,[]),a.unsubscribe(c);else{if(null==k.view)throw Error("m.mount(element, component) expects a component, not a vnode");a.subscribe(c,function(){a.render(c,r(k))});a.redraw()}}}(L);var I=J,O=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var c={},k={},d=0;d<a.length;d++){var g=a[d].split("="),l=decodeURIComponent(g[0]),g=2===g.length?decodeURIComponent(g[1]):
"";"true"===g?g=!0:"false"===g&&(g=!1);var n=l.split(/\]\[?|\[/),r=c;-1<l.indexOf("[")&&n.pop();for(var m=0;m<n.length;m++){var l=n[m],w=n[m+1],w=""==w||!isNaN(parseInt(w,10)),h=m===n.length-1;""===l&&(l=n.slice(0,m).join(),null==k[l]&&(k[l]=0),l=k[l]++);null==r[l]&&(r[l]=h?g:w?[]:{});r=r[l]}}return c},T=function(a){function c(c){var b=a.location[c].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===c&&"/"!==b[0]&&(b="/"+b);return b}function k(a){return function(){null==w&&(w=r(function(){w=
null;a()}))}}function d(a,b,c){var d=a.indexOf("?"),h=a.indexOf("#"),g=-1<d?d:-1<h?h:a.length;if(-1<d){var d=O(a.slice(d+1,-1<h?h:a.length)),k;for(k in d)b[k]=d[k]}if(-1<h)for(k in b=O(a.slice(h+1)),b)c[k]=b[k];return a.slice(0,g)}function g(){switch(m.charAt(0)){case "#":return c("hash").slice(m.length);case "?":return c("search").slice(m.length)+c("hash");default:return c("pathname").slice(m.length)+c("search")+c("hash")}}function l(c,b,g){var h={},k={};c=d(c,h,k);if(null!=b){for(var l in b)h[l]=
b[l];c=c.replace(/:([^\/]+)/g,function(a,c){delete h[c];return b[c]})}(l=K(h))&&(c+="?"+l);(k=K(k))&&(c+="#"+k);n?(g&&g.replace?a.history.replaceState(null,null,m+c):a.history.pushState(null,null,m+c),a.onpopstate()):a.location.href=m+c}var n="function"===typeof a.history.pushState,r="function"===typeof setImmediate?setImmediate:setTimeout,m="#!",w;return{setPrefix:function(a){m=a},getPath:g,setPath:l,defineRoutes:function(c,b,l){function h(){var a=g(),h={},k=d(a,h,h),m;for(m in c){var n=new RegExp("^"+
m.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(n.test(k)){k.replace(n,function(){for(var d=m.match(/:[^\/]+/g)||[],g=[].slice.call(arguments,1,-2),k=0;k<d.length;k++)h[d[k].replace(/:|\./g,"")]=decodeURIComponent(g[k]);b(c[m],h,a,m)});return}}l(a,h)}n?a.onpopstate=k(h):"#"===m.charAt(0)&&(a.onhashchange=h);h()},link:function(a){a.dom.setAttribute("href",m+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=
!1,a=this.getAttribute("href"),0===a.indexOf(m)&&(a=a.slice(m.length)),l(a,void 0,void 0))}}}};y.route=function(a,c){var k=T(a),d=function(a){return a},g,l,n,w,m,y=function(a,b,y){if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var h=function(a,b,c,h){l=b||"div";n=c;w=h;m=null;g=(a.render||d).bind(a);t()},t=function(){null!=g&&c.render(a,g(r(l,n.key,n)))};k.defineRoutes(y,function(a,b,c){a.view?h({},a,b,c):a.onmatch?null!=m?h(a,l,b,c):(m=function(d){h(a,
d,b,c)},I.resolve(a.onmatch(b,c)).then(function(a){null!=m&&m(a)})):h(a,"div",b,c)},function(){k.setPath(b)});c.subscribe(a,t)};y.set=function(a,b,c){m=null;k.setPath(a,b,c)};y.get=function(){return w};y.prefix=k.setPrefix;y.link=k.link;return y}(window,L);y.withAttr=function(a,c,k){return function(d){return c.call(k||this,a in d.currentTarget?d.currentTarget[a]:d.currentTarget.getAttribute(a))}};J=Q(window);y.render=J.render;y.redraw=L.redraw;y.request=N.request;y.jsonp=N.jsonp;y.parseQueryString=
O;y.buildQueryString=K;y.version="1.0.0-rc.6";"undefined"!==typeof module?module.exports=y:window.m=y};