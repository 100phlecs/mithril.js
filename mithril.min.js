new function(){function l(a,b,k,e,n,h){return{tag:a,key:b,attrs:k,children:e,text:n,dom:h,domSize:void 0,state:{},events:void 0,instance:void 0,skip:!1}}function t(a){if(null==a||"string"!==typeof a&&null==a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a&&void 0===G[a]){for(var b,k,e=[],n={};b=N.exec(a);){var h=b[1],v=b[2];""===h&&""!==v?k=v:"#"===h?n.id=v:"."===h?e.push(v):"["===b[3][0]&&((h=b[6])&&(h=h.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),
"class"===b[4]?e.push(h):n[b[4]]=h||!0)}0<e.length&&(n.className=e.join(" "));G[a]=function(a,b){var e=!1,h,f,x=a.className||a["class"],m;for(m in n)a[m]=n[m];void 0!==x&&(void 0!==a["class"]&&(a["class"]=void 0,a.className=x),void 0!==n.className&&(a.className=n.className+" "+x));for(m in a)if("key"!==m){e=!0;break}b instanceof Array&&1==b.length&&null!=b[0]&&"#"===b[0].tag?f=b[0].children:h=b;return l(k||"div",a.key,e?a:void 0,h,f,void 0)}}var q;null!=arguments[1]&&("object"!==typeof arguments[1]||
void 0!==arguments[1].tag||arguments[1]instanceof Array)?e=1:(q=arguments[1],e=2);if(arguments.length===e+1)b=arguments[e]instanceof Array?arguments[e]:[arguments[e]];else for(b=[];e<arguments.length;e++)b.push(arguments[e]);return"string"===typeof a?G[a](q||{},l.normalizeChildren(b)):l(a,q&&q.key,q||{},l.normalizeChildren(b),void 0,void 0)}l.normalize=function(a){return a instanceof Array?l("[",void 0,void 0,l.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?l("#",void 0,void 0,a,
void 0,void 0):a};l.normalizeChildren=function(a){for(var b=0;b<a.length;b++)a[b]=l.normalize(a[b]);return a};var N=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,G={};t.trust=function(a){null==a&&(a="");return l("<",void 0,void 0,a,void 0,void 0)};t.fragment=function(a,b){return l("[",a.key,a,l.normalizeChildren(b),void 0,void 0)};var z=function(a){function b(a,b){return function x(m){var p;try{if(!b||null==m||"object"!==typeof m&&"function"!==typeof m||"function"!==
typeof(p=m.then))l(function(){b||0!==a.length||console.error("Possible unhandled promise rejection:",m);for(var e=0;e<a.length;e++)a[e](m);n.length=0;h.length=0;r.state=b;r.retry=function(){x(m)}});else{if(m===e)throw new TypeError("Promise can't be resolved w/ itself");k(p.bind(m))}}catch(E){q(E)}}}function k(a){function b(a){return function(b){0<f++||a(b)}}var f=0,e=b(q);try{a(b(v),e)}catch(m){e(m)}}if(!(this instanceof z))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");
var e=this,n=[],h=[],v=b(n,!0),q=b(h,!1),r=e._instance={resolvers:n,rejectors:h},l="function"===typeof setImmediate?setImmediate:setTimeout;k(a)};z.prototype.then=function(a,b){function k(a,b,k,p){b.push(function(b){if("function"!==typeof a)k(b);else try{n(a(b))}catch(f){h&&h(f)}});"function"===typeof e.retry&&p===e.state&&e.retry()}var e=this._instance,n,h,v=new z(function(a,b){n=a;h=b});k(a,e.resolvers,n,!0);k(b,e.rejectors,h,!1);return v};z.prototype["catch"]=function(a){return this.then(null,
a)};z.resolve=function(a){return a instanceof z?a:new z(function(b){b(a)})};z.reject=function(a){return new z(function(b,k){k(a)})};z.all=function(a){return new z(function(b,k){var e=a.length,n=0,h=[];if(0===a.length)b([]);else for(var v=0;v<a.length;v++)(function(v){function r(a){n++;h[v]=a;n===e&&b(h)}null==a[v]||"object"!==typeof a[v]&&"function"!==typeof a[v]||"function"!==typeof a[v].then?r(a[v]):a[v].then(r,k)})(v)})};z.race=function(a){return new z(function(b,k){for(var e=0;e<a.length;e++)a[e].then(b,
k)})};"undefined"===typeof Promise&&("undefined"!==typeof window?window.Promise=z:"undefined"!==typeof global&&(global.Promise=z));var C=function(a){function b(a,e){if(e instanceof Array)for(var h=0;h<e.length;h++)b(a+"["+h+"]",e[h]);else if("[object Object]"===Object.prototype.toString.call(e))for(h in e)b(a+"["+h+"]",e[h]);else k.push(encodeURIComponent(a)+(null!=e&&""!==e?"="+encodeURIComponent(e):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var k=[],e;for(e in a)b(e,
a[e]);return k.join("&")},H=function(a,b){function k(){0===--p&&"function"===typeof w&&w()}function e(a){var f=a.then;a.then=function(){p++;var b=f.apply(a,arguments);b.then(k,function(a){k();throw a;});return e(b)};return a}function n(a,b){if(null==b)return a;for(var f=a.match(/:[^\/]+/gi)||[],e=0;e<f.length;e++){var h=f[e].slice(1);null!=b[h]&&(a=a.replace(f[e],b[h]),delete b[h])}return a}function h(a,b){var f=C(b);if(""!==f){var e=0>a.indexOf("?")?"?":"&";a+=e+f}return a}function v(a){try{return""!==
a?JSON.parse(a):null}catch(x){throw Error(a);}}function q(a){return a.responseText}function r(a,b){if("function"===typeof a)if(b instanceof Array)for(var e=0;e<b.length;e++)b[e]=new a(b[e]);else return new a(b);return b}var l=0,p=0,w;return{request:function(f,k){return e(new b(function(b,e){if("string"===typeof f){var p=f;f=k||{};null==f.url&&(f.url=p)}null==f.method&&(f.method="GET");f.method=f.method.toUpperCase();p="boolean"===typeof f.useBody?f.useBody:"GET"!==f.method&&"TRACE"!==f.method;"function"!==
typeof f.serialize&&(f.serialize="undefined"!==typeof FormData&&f.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==typeof f.deserialize&&(f.deserialize=v);"function"!==typeof f.extract&&(f.extract=q);f.url=n(f.url,f.data);p?f.data=f.serialize(f.data):f.url=h(f.url,f.data);var m=new a.XMLHttpRequest;m.open(f.method,f.url,"boolean"===typeof f.async?f.async:!0,"string"===typeof f.user?f.user:void 0,"string"===typeof f.password?f.password:void 0);f.serialize===JSON.stringify&&
p&&m.setRequestHeader("Content-Type","application/json; charset=utf-8");f.deserialize===v&&m.setRequestHeader("Accept","application/json, text/*");"function"===typeof f.config&&(m=f.config(m,f)||m);m.onreadystatechange=function(){if(4===m.readyState)try{var a=f.extract!==q?f.extract(m,f):f.deserialize(f.extract(m,f));if(200<=m.status&&300>m.status||304===m.status)b(r(f.type,a));else{var h=Error(m.responseText),k;for(k in a)h[k]=a[k];e(h)}}catch(F){e(F)}};p&&null!=f.data?m.send(f.data):m.send()}))},
jsonp:function(f){return e(new b(function(b,e){var m=f.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+l++,k=a.document.createElement("script");a[m]=function(e){k.parentNode.removeChild(k);b(r(f.type,e));delete a[m]};k.onerror=function(){k.parentNode.removeChild(k);e(Error("JSONP request failed"));delete a[m]};null==f.data&&(f.data={});f.url=n(f.url,f.data);f.data[f.callbackKey||"callback"]=m;k.src=h(f.url,f.data);a.document.documentElement.appendChild(k)}))},setCompletionCallback:function(a){w=
a}}}(window,"undefined"!==typeof Promise?Promise:z),I=function(){var a=[];return{subscribe:a.push.bind(a),unsubscribe:function(b){b=a.indexOf(b);-1<b&&a.splice(b,1)},publish:function(){for(var b=0;b<a.length;b++)a[b].apply(this,arguments)}}}();H.setCompletionCallback(I.publish);var M=function(a){function b(c,g,a,b,e,f,h){for(;a<b;a++){var d=g[a];null!=d&&r(c,k(d,e,h),f)}}function k(c,g,a){var d=c.tag;null!=c.attrs&&t(c.attrs,c,g);if("string"===typeof d)switch(d){case "#":return c.dom=A.createTextNode(c.children);
case "<":return e(c);case "[":var f=A.createDocumentFragment();null!=c.children&&(d=c.children,b(f,d,0,d.length,g,null,a));c.dom=f.firstChild;c.domSize=f.childNodes.length;return f;default:var h=c.tag;switch(c.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}var p=(d=c.attrs)&&d.is,h=a?p?A.createElementNS(a,h,{is:p}):A.createElementNS(a,h):p?A.createElement(h,{is:p}):A.createElement(h);c.dom=h;if(null!=d)for(f in p=a,d)m(c,f,null,d[f],p);null!=
c.attrs&&null!=c.attrs.contenteditable?z(c):(null!=c.text&&(""!==c.text?h.textContent=c.text:c.children=[l("#",void 0,void 0,c.text,void 0,void 0)]),null!=c.children&&(f=c.children,b(h,f,0,f.length,g,null,a),g=c.attrs,"select"===c.tag&&null!=g&&("value"in g&&m(c,"value",null,g.value,void 0),"selectedIndex"in g&&m(c,"selectedIndex",null,g.selectedIndex,void 0))));return h}else{c.state||(c.state={});O(c.state,c.tag);f=c.tag.view;if(null!=f.reentrantLock)c=F;else if(f.reentrantLock=!0,t(c.tag,c,g),c.instance=
l.normalize(f.call(c.state,c)),f.reentrantLock=null,null!=c.instance){if(c.instance===c)throw Error("A view cannot return the vnode it received as arguments");g=k(c.instance,g,a);c.dom=c.instance.dom;c.domSize=null!=c.dom?c.instance.domSize:0;c=g}else c.domSize=0,c=F;return c}}function e(c){var g={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(c.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",g=A.createElement(g);g.innerHTML=
c.children;c.dom=g.firstChild;c.domSize=g.childNodes.length;c=A.createDocumentFragment();for(var a;a=g.firstChild;)c.appendChild(a);return c}function n(c,a,d,e,f,m){if(a!==d&&(null!=a||null!=d))if(null==a)b(c,d,0,d.length,e,f,void 0);else if(null==d)p(a,0,a.length,d);else{var g;a:{if(null!=a.pool&&Math.abs(a.pool.length-d.length)<=Math.abs(a.length-d.length)&&(g=d[0]&&d[0].children&&d[0].children.length||0,Math.abs((a.pool[0]&&a.pool[0].children&&a.pool[0].children.length||0)-g)<=Math.abs((a[0]&&
a[0].children&&a[0].children.length||0)-g))){g=!0;break a}g=!1}g&&(a=a.concat(a.pool));if(a.length===d.length&&null!=d[0]&&null==d[0].key)for(var u=0;u<a.length;u++)a[u]===d[u]||null==a[u]&&null==d[u]||(null==a[u]?r(c,k(d[u],e,m),q(a,u+1,f)):null==d[u]?p(a,u,u+1,d):h(c,a[u],d[u],e,q(a,u+1,f),g,m),g&&a[u].tag===d[u].tag&&r(c,v(a[u]),q(a,u+1,f)));else{for(var n=u=0,w=a.length-1,B=d.length-1,x;w>=u&&B>=n;){var y=a[u],l=d[n];if(y!==l||g)if(null!=y&&null!=l&&y.key===l.key)u++,n++,h(c,y,l,e,q(a,u,f),g,
m),g&&y.tag===l.tag&&r(c,v(y),f);else if(y=a[w],y!==l||g)if(null!=y&&null!=l&&y.key===l.key)h(c,y,l,e,q(a,w+1,f),g,m),(g||n<B)&&r(c,v(y),q(a,u,f)),w--,n++;else break;else w--,n++;else u++,n++}for(;w>=u&&B>=n;){y=a[w];l=d[B];if(y!==l||g)if(null!=y&&null!=l&&y.key===l.key)h(c,y,l,e,q(a,w+1,f),g,m),g&&y.tag===l.tag&&r(c,v(y),f),null!=y.dom&&(f=y.dom),w--;else{if(!x){x=a;var y=w,D={},A;for(A=0;A<y;A++){var t=x[A];null!=t&&(t=t.key,null!=t&&(D[t]=A))}x=D}null!=l&&(y=x[l.key],null!=y?(D=a[y],h(c,D,l,e,
q(a,w+1,f),g,m),r(c,v(D),f),a[y].skip=!0,null!=D.dom&&(f=D.dom)):(l=k(l,e,void 0),r(c,l,f),f=l))}else w--;B--;if(B<n)break}b(c,d,n,B+1,e,f,m);p(a,u,w+1,d)}}}function h(a,g,d,b,p,w,x){var c=g.tag;if(c===d.tag){d.state=g.state;d.events=g.events;var u;var B;null!=d.attrs&&"function"===typeof d.attrs.onbeforeupdate&&(u=d.attrs.onbeforeupdate.call(d.state,d,g));"string"!==typeof d.tag&&"function"===typeof d.tag.onbeforeupdate&&(B=d.tag.onbeforeupdate.call(d.state,d,g));void 0===u&&void 0===B||u||B?u=!1:
(d.dom=g.dom,d.domSize=g.domSize,d.instance=g.instance,u=!0);if(!u)if(null!=d.attrs&&L(d.attrs,d,b,w),"string"===typeof c)switch(c){case "#":g.children.toString()!==d.children.toString()&&(g.dom.nodeValue=d.children);d.dom=g.dom;break;case "<":g.children!==d.children?(v(g),r(a,e(d),p)):(d.dom=g.dom,d.domSize=g.domSize);break;case "[":n(a,g.children,d.children,b,p,x);g=0;b=d.children;d.dom=null;if(null!=b){for(var q=0;q<b.length;q++)a=b[q],null!=a&&null!=a.dom&&(null==d.dom&&(d.dom=a.dom),g+=a.domSize||
1);1!==g&&(d.domSize=g)}break;default:a=x;p=d.dom=g.dom;switch(d.tag){case "svg":a="http://www.w3.org/2000/svg";break;case "math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===d.tag&&(null==d.attrs&&(d.attrs={}),null!=d.text&&(d.attrs.value=d.text,d.text=void 0));w=g.attrs;x=d.attrs;c=a;if(null!=x)for(q in x)m(d,q,w&&w[q],x[q],c);if(null!=w)for(q in w)null!=x&&q in x||("className"===q&&(q="class"),"o"!==q[0]||"n"!==q[1]||K(q)?"key"!==q&&d.dom.removeAttribute(q):E(d,q,void 0));null!=d.attrs&&
null!=d.attrs.contenteditable?z(d):null!=g.text&&null!=d.text&&""!==d.text?g.text.toString()!==d.text.toString()&&(g.dom.firstChild.nodeValue=d.text):(null!=g.text&&(g.children=[l("#",void 0,void 0,g.text,void 0,g.dom.firstChild)]),null!=d.text&&(d.children=[l("#",void 0,void 0,d.text,void 0,void 0)]),n(p,g.children,d.children,b,null,a))}else d.instance=l.normalize(d.tag.view.call(d.state,d)),L(d.tag,d,b,w),null!=d.instance?(null==g.instance?r(a,k(d.instance,b,x),p):h(a,g.instance,d.instance,b,p,
w,x),d.dom=d.instance.dom,d.domSize=d.instance.domSize):null!=g.instance?(f(g.instance,null),d.dom=void 0,d.domSize=0):(d.dom=g.dom,d.domSize=g.domSize)}else f(g,null),r(a,k(d,b,x),p)}function v(a){var c=a.domSize;if(null!=c||null==a.dom){var d=A.createDocumentFragment();if(0<c){for(a=a.dom;--c;)d.appendChild(a.nextSibling);d.insertBefore(a,d.firstChild)}return d}return a.dom}function q(a,g,d){for(;g<a.length;g++)if(null!=a[g]&&null!=a[g].dom)return a[g].dom;return d}function r(a,g,d){d&&d.parentNode?
a.insertBefore(g,d):a.appendChild(g)}function z(a){var c=a.children;if(null!=c&&1===c.length&&"<"===c[0].tag)c=c[0].children,a.dom.innerHTML!==c&&(a.dom.innerHTML=c);else if(null!=c||null!=a.text)throw Error("Child node of a contenteditable must be trusted");}function p(a,g,d,b){for(;g<d;g++){var c=a[g];null!=c&&(c.skip?c.skip=!1:f(c,b))}}function w(a){var c=!1;return function(){c||(c=!0,a())}}function f(a,g){function c(){if(++f===b&&(x(a),a.dom)){var c=a.domSize||1;if(1<c)for(var d=a.dom;--c;){var e=
d.nextSibling,h=e.parentNode;null!=h&&h.removeChild(e)}c=a.dom;d=c.parentNode;null!=d&&d.removeChild(c);if(c=null!=g&&null==a.domSize)c=a.attrs,c=!(null!=c&&(c.oncreate||c.onupdate||c.onbeforeremove||c.onremove));c&&"string"===typeof a.tag&&(g.pool?g.pool.push(a):g.pool=[a])}}var b=1,f=0;a.attrs&&a.attrs.onbeforeremove&&(b++,a.attrs.onbeforeremove.call(a.state,a,w(c)));"string"!==typeof a.tag&&a.tag.onbeforeremove&&(b++,a.tag.onbeforeremove.call(a.state,a,w(c)));c()}function x(a){a.attrs&&a.attrs.onremove&&
a.attrs.onremove.call(a.state,a);"string"!==typeof a.tag&&a.tag.onremove&&a.tag.onremove.call(a.state,a);if(null!=a.instance)x(a.instance);else if(a=a.children,a instanceof Array)for(var c=0;c<a.length;c++){var d=a[c];null!=d&&x(d)}}function m(a,g,d,b,f){var c=a.dom;if("key"!==g&&(d!==b||"value"===g||"checked"===g||"selectedIndex"===g||"selected"===g&&a.dom===A.activeElement||"object"===typeof b)&&"undefined"!==typeof b&&!K(g)){var e=g.indexOf(":");if(-1<e&&"xlink"===g.substr(0,e))c.setAttributeNS("http://www.w3.org/1999/xlink",
g.slice(e+1),b);else if("o"===g[0]&&"n"===g[1]&&"function"===typeof b)E(a,g,b);else if("style"===g)if(a=d,a===b&&(c.style.cssText="",a=null),null==b)c.style.cssText="";else if("string"===typeof b)c.style.cssText=b;else{"string"===typeof a&&(c.style.cssText="");for(var h in b)c.style[h]=b[h];if(null!=a&&"string"!==typeof a)for(h in a)h in b||(c.style[h]="")}else g in c&&"href"!==g&&"list"!==g&&"form"!==g&&"width"!==g&&"height"!==g&&void 0===f?"input"===a.tag&&"value"===g&&a.dom.value===b&&a.dom===
A.activeElement||"select"===a.tag&&"value"===g&&a.dom.value===b&&a.dom===A.activeElement||"option"===a.tag&&"value"===g&&a.dom.value===b||(c[g]=b):"boolean"===typeof b?b?c.setAttribute(g,""):c.removeAttribute(g):c.setAttribute("className"===g?"class":g,b)}}function K(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function E(a,b,d){var c=a.dom,g=function(a){var b=d.call(c,a);"function"===typeof C&&C.call(c,a);return b};if(b in c)c[b]=
"function"===typeof d?g:null;else{var f=b.slice(2);void 0===a.events&&(a.events={});null!=a.events[b]&&c.removeEventListener(f,a.events[b],!1);"function"===typeof d&&(a.events[b]=g,c.addEventListener(f,a.events[b],!1))}}function t(a,b,d){"function"===typeof a.oninit&&a.oninit.call(b.state,b);"function"===typeof a.oncreate&&d.push(a.oncreate.bind(b.state,b))}function L(a,b,d,f){f?t(a,b,d):"function"===typeof a.onupdate&&d.push(a.onupdate.bind(b.state,b))}function O(a,b){Object.keys(b).forEach(function(c){a[c]=
b[c]})}var A=a.document,F=A.createDocumentFragment(),C;return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],f=A.activeElement;null==a.vnodes&&(a.textContent="");b instanceof Array||(b=[b]);n(a,a.vnodes,l.normalizeChildren(b),c,null,void 0);a.vnodes=b;for(var g=0;g<c.length;g++)c[g]();A.activeElement!==f&&f.focus()},setEventCallback:function(a){return C=a}}}(window),P=function(a){var b=0,k=null,e="function"===typeof requestAnimationFrame?
requestAnimationFrame:setTimeout;return function(n){var h=Date.now();!0===n||0===b||16<=h-b?(b=h,a()):null===k&&(k=e(function(){k=null;a();b=Date.now()},16-(h-b)))}},Q=function(a,b,k,e){e=P(e);null!=b&&b.setEventCallback(function(a){!1!==a.redraw&&k.publish()});null!=k&&(a.redraw&&k.unsubscribe(a.redraw),k.subscribe(e));return a.redraw=e};t.mount=function(a,b){return function(k,e){if(null===e)a.render(k,[]),b.unsubscribe(k.redraw),delete k.redraw;else{if(null==e.view)throw Error("m.mount(element, component) expects a component, not a vnode");
Q(k,a,b,function(){a.render(k,l(e,void 0,void 0,void 0,void 0,void 0))})()}}}(M,I);var J=function(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var b={},k={},e=0;e<a.length;e++){var n=a[e].split("="),h=decodeURIComponent(n[0]),n=2===n.length?decodeURIComponent(n[1]):"";"true"===n?n=!0:"false"===n&&(n=!1);var l=h.split(/\]\[?|\[/),q=b;-1<h.indexOf("[")&&l.pop();for(var r=0;r<l.length;r++){var h=l[r],t=l[r+1],t=""==t||!isNaN(parseInt(t,10)),p=r===l.length-1;""===
h&&(h=l.slice(0,r).join(),null==k[h]&&(k[h]=0),h=k[h]++);null==q[h]&&(q[h]=p?n:t?[]:{});q=q[h]}}return b},R=function(a){function b(b){var e=a.location[b].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===b&&"/"!==e[0]&&(e="/"+e);return e}function k(a){return function(){null==t&&(t=q(function(){t=null;a()}))}}function e(a,b,f){var e=a.indexOf("?"),h=a.indexOf("#"),k=-1<e?e:-1<h?h:a.length;if(-1<e){var e=J(a.slice(e+1,-1<h?h:a.length)),p;for(p in e)b[p]=e[p]}if(-1<h)for(p in b=J(a.slice(h+
1)),b)f[p]=b[p];return a.slice(0,k)}function n(){switch(r.charAt(0)){case "#":return b("hash").slice(r.length);case "?":return b("search").slice(r.length)+b("hash");default:return b("pathname").slice(r.length)+b("search")+b("hash")}}function h(b,h,f){var k={},m={};b=e(b,k,m);if(null!=h){for(var n in h)k[n]=h[n];b=b.replace(/:([^\/]+)/g,function(a,b){delete k[b];return h[b]})}(n=C(k))&&(b+="?"+n);(m=C(m))&&(b+="#"+m);l?(f&&f.replace?a.history.replaceState(null,null,r+b):a.history.pushState(null,null,
r+b),a.onpopstate()):a.location.href=r+b}var l="function"===typeof a.history.pushState,q="function"===typeof setImmediate?setImmediate:setTimeout,r="#!",t;return{setPrefix:function(a){r=a},getPath:n,setPath:h,defineRoutes:function(b,h,f){function p(){var a=n(),k={},l=e(a,k,k),p;for(p in b){var q=new RegExp("^"+p.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(q.test(l)){l.replace(q,function(){for(var e=p.match(/:[^\/]+/g)||[],f=[].slice.call(arguments,1,-2),m=0;m<e.length;m++)k[e[m].replace(/:|\./g,
"")]=decodeURIComponent(f[m]);h(b[p],k,a,p)});return}}f(a,k)}l?a.onpopstate=k(p):"#"===r.charAt(0)&&(a.onhashchange=p);p();return p},link:function(a){a.dom.setAttribute("href",r+a.attrs.href);a.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=!1,a=this.getAttribute("href"),0===a.indexOf(r)&&(a=a.slice(r.length)),h(a,void 0,void 0))}}}};t.route=function(a,b){function k(a){return a}var e=R(a),n,h,t,q,r,z={view:function(){return[t(l(h,null,q,void 0,
void 0,void 0))]}},p=function(a,f,l){h="div";t=k;q=null;b(a,z);e.defineRoutes(l,function(b,e,f){var l="function"!==typeof b.view,m=k,p=n=function(k){p===n&&(n=null,h=null!=k?k:l?"div":b,t=m,q=e,r=f,a.redraw(!0))},v=function(){p()};l&&("function"===typeof b.render&&(m=b.render.bind(b)),"function"===typeof b.onmatch&&(v=b.onmatch));v.call(b,p,e,f)},function(){e.setPath(f,null,{replace:!0})})};p.link=e.link;p.prefix=e.setPrefix;p.set=e.setPath;p.get=function(){return r};return p}(window,t.mount);t.withAttr=
function(a,b,k){return function(e){return b.call(k||this,a in e.currentTarget?e.currentTarget[a]:e.currentTarget.getAttribute(a))}};t.render=M.render;t.redraw=I.publish;t.request=H.request;t.jsonp=H.jsonp;t.parseQueryString=J;t.buildQueryString=C;t.version="1.0.0-rc.5";"undefined"!==typeof module?module.exports=t:window.m=t};